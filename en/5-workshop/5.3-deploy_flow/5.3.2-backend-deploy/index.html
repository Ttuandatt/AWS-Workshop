<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.149.1">
    <meta name="generator" content="Relearn 8.2.0+fe198b0077bd441c984854c0a0610da02b2162f8">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):
Public Subnets: Ch·ª©a t·∫•t c·∫£ ECS Tasks (App, Kafka, AI) &#43; ALB &#43; Bastion. (B·∫Øt bu·ªôc ƒë·ªÉ Task c√≥ th·ªÉ t·∫£i Image t·ª´ Internet).">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):
Public Subnets: Ch·ª©a t·∫•t c·∫£ ECS Tasks (App, Kafka, AI) &#43; ALB &#43; Bastion. (B·∫Øt bu·ªôc ƒë·ªÉ Task c√≥ th·ªÉ t·∫£i Image t·ª´ Internet).">
    <meta property="og:url" content="https://Ttuandatt.github.io/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html">
    <meta property="og:site_name" content="Internship Report">
    <meta property="og:description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):
Public Subnets: Ch·ª©a t·∫•t c·∫£ ECS Tasks (App, Kafka, AI) &#43; ALB &#43; Bastion. (B·∫Øt bu·ªôc ƒë·ªÉ Task c√≥ th·ªÉ t·∫£i Image t·ª´ Internet).">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta itemprop="description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):
Public Subnets: Ch·ª©a t·∫•t c·∫£ ECS Tasks (App, Kafka, AI) &#43; ALB &#43; Bastion. (B·∫Øt bu·ªôc ƒë·ªÉ Task c√≥ th·ªÉ t·∫£i Image t·ª´ Internet).">
    <meta itemprop="wordCount" content="2485">
    <title></title>
    <link href="../../../../en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="../../../../AWS-Workshop/css/auto-complete/auto-complete.min.css?1764948485" rel="stylesheet">
    <script src="../../../../AWS-Workshop/js/auto-complete/auto-complete.min.js?1764948485" defer></script>
    <script src="../../../../AWS-Workshop/js/search-lunr.min.js?1764948485" defer></script>
    <script src="../../../../AWS-Workshop/js/search.min.js?1764948485" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="../../../../searchindex.en.js?1764948485";
    </script>
    <script src="../../../../AWS-Workshop/js/lunr/lunr.min.js?1764948485" defer></script>
    <script src="../../../../AWS-Workshop/js/lunr/lunr.stemmer.support.min.js?1764948485" defer></script>
    <script src="../../../../AWS-Workshop/js/lunr/lunr.multi.min.js?1764948485" defer></script>
    <script src="../../../../AWS-Workshop/js/lunr/lunr.en.min.js?1764948485" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="../../../../AWS-Workshop/fonts/fontawesome/css/fontawesome-all.min.css?1764948485" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../../../../AWS-Workshop/fonts/fontawesome/css/fontawesome-all.min.css?1764948485" rel="stylesheet"></noscript>
    <link href="../../../../AWS-Workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1764948485" rel="stylesheet">
    <link href="../../../../css/theme.min.css?1764948485" rel="stylesheet">
    <link href="../../../../css/format-html.min.css?1764948485" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/5-workshop\/5.3-deploy_flow\/5.3.2-backend-deploy\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/Ttuandatt.github.io\/AWS-Workshop';
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'relearn-light', 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="../../../../css/custom.css?1764948485" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="../../../../en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#-t·ªïng-quan-h·ªá-th·ªëng">üèó T·ªîNG QUAN H·ªÜ TH·ªêNG</a></li>
    <li><a href="#giai-ƒëo·∫°n-1-chu·∫©n-b·ªã-network--security">GIAI ƒêO·∫†N 1: CHU·∫®N B·ªä NETWORK &amp; SECURITY</a>
      <ul>
        <li><a href="#11-t·∫°o-vpc--subnets">1.1 T·∫°o VPC &amp; Subnets</a></li>
        <li><a href="#12-t·∫°o-security-groups-t∆∞·ªùng-l·ª≠a">1.2 T·∫°o Security Groups (T∆∞·ªùng l·ª≠a)</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-2-thi·∫øt-l·∫≠p-t√™n-mi·ªÅn--ssl">GIAI ƒêO·∫†N 2: THI·∫æT L·∫¨P T√äN MI·ªÄN &amp; SSL</a></li>
    <li><a href="#giai-ƒëo·∫°n-3-c·∫•u-h√¨nh-infrastructure">GIAI ƒêO·∫†N 3: C·∫§U H√åNH INFRASTRUCTURE</a>
      <ul>
        <li><a href="#31-rds-mysql">3.1 RDS MySQL</a></li>
        <li><a href="#32-elasticache-redis-c·∫•u-h√¨nh-chi-ti·∫øt">3.2 ElastiCache Redis (C·∫•u h√¨nh chi ti·∫øt)</a></li>
        <li><a href="#33-kafka-docker-tr√™n-ecs">3.3 Kafka (Docker tr√™n ECS)</a></li>
        <li><a href="#34-kh·ªüi-t·∫°o-database-chi-ti·∫øt">3.4 Kh·ªüi t·∫°o Database (Chi ti·∫øt)</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-4-c·∫≠p-nh·∫≠t-code--build-image">GIAI ƒêO·∫†N 4: C·∫¨P NH·∫¨T CODE &amp; BUILD IMAGE</a>
      <ul>
        <li><a href="#41-c·∫•u-h√¨nh-api-gateway-quan-tr·ªçng">4.1 C·∫•u h√¨nh API Gateway (Quan tr·ªçng)</a></li>
        <li><a href="#42-build--push-6-images-l√™n-ecr">4.2 Build &amp; Push 6 Images l√™n ECR</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https">GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS</a></li>
    <li><a href="#giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https-1">GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS</a>
      <ul>
        <li><a href="#2-t·∫°o-application-load-balancer-alb">2. T·∫°o Application Load Balancer (ALB)</a></li>
        <li><a href="#3-c·∫•u-h√¨nh-routing-rules-quy-tr√¨nh-chu·∫©n-2-b∆∞·ªõc">3. C·∫•u h√¨nh Routing Rules (Quy tr√¨nh chu·∫©n 2 b∆∞·ªõc)</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-6-task-definitions-kh·ªõp-docker-compose">GIAI ƒêO·∫†N 6: TASK DEFINITIONS (KH·ªöP DOCKER-COMPOSE)</a>
      <ul>
        <li><a href="#1-auth-service--user-service--taskflow-service">1. Auth Service &amp; User Service &amp; Taskflow Service</a></li>
        <li><a href="#2-notification-service">2. Notification Service</a></li>
        <li><a href="#3-ai-model-service-m·ªõi">3. AI Model Service (M·ªöI)</a></li>
        <li><a href="#4-api-gateway-quan-tr·ªçng">4. API Gateway (QUAN TR·ªåNG)</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-7-deploy-services">GIAI ƒêO·∫†N 7: DEPLOY SERVICES</a></li>
    <li><a href="#giai-ƒëo·∫°n-8-ho√†n-t·∫•t">GIAI ƒêO·∫†N 8: HO√ÄN T·∫§T</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../../../../en/index.html"><span itemprop="name">Internship Report</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../../../../en/5-workshop/index.html"><span itemprop="name">Workshop</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../../../../en/5-workshop/5.3-deploy_flow/index.html"><span itemprop="name">Deploy Flow</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><a href="../../../../en/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/5.3.1.7-deploy-and-test/index.html" title="Deploy and Test (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><a href="../../../../en/5-workshop/5.4-clean_up/index.html" title="Clean Up (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 5-workshop" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h1 id="h∆∞·ªõng-d·∫´n-deploy-backend-microservices-tr√™n-aws-ecs-final-version">
  H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h1><h2 id="-t·ªïng-quan-h·ªá-th·ªëng">
  üèó T·ªîNG QUAN H·ªÜ TH·ªêNG







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ul>
<li>
<p><strong>Region:</strong> Singapore (<code>ap-southeast-1</code>).</p>
</li>
<li>
<p><strong>Frontend Domain:</strong> <code>https://sgutodolist.com</code>.</p>
</li>
<li>
<p><strong>Backend Domain:</strong> <code>https://api.sgutodolist.com</code>.</p>
</li>
<li>
<p><strong>Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):</strong></p>
<ul>
<li>
<p><strong>Public Subnets:</strong> Ch·ª©a t·∫•t c·∫£ ECS Tasks (App, Kafka, AI) + ALB + Bastion. (B·∫Øt bu·ªôc ƒë·ªÉ Task c√≥ th·ªÉ t·∫£i Image t·ª´ Internet).</p>
</li>
<li>
<p><strong>Private Subnets:</strong> Ch·ª©a RDS + Redis (ƒê·ªÉ b·∫£o m·∫≠t d·ªØ li·ªáu).</p>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-1-chu·∫©n-b·ªã-network--security">
  GIAI ƒêO·∫†N 1: CHU·∫®N B·ªä NETWORK &amp; SECURITY







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="11-t·∫°o-vpc--subnets">
  1.1 T·∫°o VPC &amp; Subnets







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ol>
<li>
<p>V√†o <strong>VPC Console</strong> &gt; <strong>Create VPC</strong>.</p>
</li>
<li>
<p>Ch·ªçn <strong>VPC and more</strong>.</p>
<ul>
<li>
<p><strong>Name tag auto-generation:</strong> Nh·∫≠p <code>SGU-Microservices</code>.</p>
</li>
<li>
<p><strong>IPv4 CIDR block:</strong> <code>10.0.0.0/16</code>.</p>
</li>
<li>
<p><strong>Number of Availability Zones (AZs):</strong> Ch·ªçn <strong>2</strong> (<code>ap-southeast-1a</code> v√† <code>ap-southeast-1b</code>).</p>
</li>
<li>
<p><strong>Number of public subnets:</strong> Ch·ªçn <strong>2</strong>.</p>
</li>
<li>
<p><strong>Number of private subnets:</strong> Ch·ªçn <strong>2</strong>.</p>
</li>
<li>
<p><strong>NAT gateways:</strong> Ch·ªçn <strong>None</strong> (‚ö†Ô∏è Quan tr·ªçng ƒë·ªÉ ti·∫øt ki·ªám ~$30/th√°ng).</p>
</li>
<li>
<p><strong>VPC endpoints:</strong> Ch·ªçn <strong>None</strong>.</p>
</li>
<li>
<p><strong>DNS options:</strong> T√≠ch ch·ªçn c·∫£ <strong>Enable DNS hostnames</strong> v√† <strong>Enable DNS resolution</strong>.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Create VPC</strong>.</p>
</li>
</ol>
<h3 id="12-t·∫°o-security-groups-t∆∞·ªùng-l·ª≠a">
  1.2 T·∫°o Security Groups (T∆∞·ªùng l·ª≠a)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>V√†o <strong>VPC</strong> &gt; <strong>Security Groups</strong> &gt; <strong>Create security group</strong>. T·∫°o l·∫ßn l∆∞·ª£t 4 nh√≥m:</p>
<p><strong>1. <code>public-alb-sg</code></strong> (Cho Load Balancer):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST ALB</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules:</strong></p>
<ul>
<li>
<p>Type: <code>HTTPS</code> (443) | Source: <code>0.0.0.0/0</code>.</p>
</li>
<li>
<p>Type: <code>HTTP</code> (80) | Source: <code>0.0.0.0/0</code>.</p>
</li>
</ul>
</li>
</ul>
<p><strong>2. <code>ecs-app-sg</code></strong> (Cho c√°c Service Container):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST Service Container</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules (B∆∞·ªõc 1):</strong></p>
<ul>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>8080</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>8081</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>8082</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>9998</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>9999</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>9997</code> | Source: Ch·ªçn <code>public-alb-sg</code> (Cho AI Service).</p>
</li>
</ul>
</li>
<li>
<p><em>Nh·∫•n <strong>Create security group</strong> tr∆∞·ªõc.</em></p>
</li>
<li>
<p><strong>Inbound rules (B∆∞·ªõc 2 - Self referencing):</strong></p>
<ul>
<li>
<p>Ch·ªçn l·∫°i <code>ecs-app-sg</code> &gt; Edit inbound rules &gt; Add rule.</p>
</li>
<li>
<p>Type: <code>All TCP</code> | Port: <code>0-65535</code> | Source: T√¨m v√† ch·ªçn ch√≠nh <code>ecs-app-sg</code>.</p>
</li>
</ul>
</li>
</ul>
<p><strong>3. <code>private-db-sg</code></strong> (Cho RDS &amp; Redis &amp; Kafka):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST RDS &amp; Redis &amp; Kafka</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules:</strong></p>
<ul>
<li>
<p>Type: <code>MySQL</code> (3306) | Source: Ch·ªçn <code>ecs-app-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> (Port <code>6379</code>) | Source: Ch·ªçn <code>ecs-app-sg</code> (Redis).</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> (Port <code>9092</code>) | Source: Ch·ªçn <code>ecs-app-sg</code> (Kafka).</p>
</li>
</ul>
</li>
</ul>
<p><strong>4. <code>bastion-sg</code></strong> (Cho m√°y nh·∫£y):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST bastion</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules:</strong></p>
<ul>
<li>Type: <code>SSH</code> (22) | Source: <code>My IP</code> (IP m√°y c·ªßa b·∫°n).</li>
</ul>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-2-thi·∫øt-l·∫≠p-t√™n-mi·ªÅn--ssl">
  GIAI ƒêO·∫†N 2: THI·∫æT L·∫¨P T√äN MI·ªÄN &amp; SSL







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li>
<p>ƒê·ªïi Region sang <strong>Singapore (ap-southeast-1)</strong>.</p>
</li>
<li>
<p>V√†o <strong>Certificate Manager (ACM)</strong>.</p>
</li>
<li>
<p><strong>Request a certificate</strong> &gt; <strong>Request a public certificate</strong>.</p>
</li>
<li>
<p>Domain names: <code>api.sgutodolist.com</code>.</p>
</li>
<li>
<p>Validation method: <strong>DNS validation</strong>.</p>
</li>
<li>
<p>Click <strong>Request</strong>.</p>
</li>
<li>
<p>Click v√†o Certificate ID &gt; Ph·∫ßn <strong>Domains</strong> &gt; <strong>Create records in Route 53</strong>.</p>
</li>
<li>
<p>ƒê·ª£i tr·∫°ng th√°i chuy·ªÉn sang <strong>Issued</strong> (M√†u xanh).</p>
</li>
</ol>
<hr>
<h2 id="giai-ƒëo·∫°n-3-c·∫•u-h√¨nh-infrastructure">
  GIAI ƒêO·∫†N 3: C·∫§U H√åNH INFRASTRUCTURE







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="31-rds-mysql">
  3.1 RDS MySQL







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ol>
<li>
<p>V√†o <strong>RDS</strong> &gt; <strong>Create database</strong> &gt; <strong>Standard create</strong> &gt; <strong>MySQL</strong>.</p>
</li>
<li>
<p>Template: <strong>Free tier</strong>.</p>
</li>
<li>
<p>Identifier: <code>sgu-todolist-db</code>.</p>
</li>
<li>
<p>Username: <code>root</code> / Password: <code>12345678</code> (V√≠ d·ª•).</p>
</li>
<li>
<p><strong>Connectivity:</strong></p>
<ul>
<li>
<p>Compute resource: <strong>Don&rsquo;t connect to an EC2&hellip;</strong>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Public access: <strong>No</strong>.</p>
</li>
<li>
<p>VPC security group: Ch·ªçn <code>private-db-sg</code> (b·ªè default).</p>
</li>
<li>
<p>Availability Zone: <strong><code>ap-southeast-1a</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Create database</strong>.</p>
</li>
<li>
<p><em>Sau khi t·∫°o xong, copy <strong>Endpoint</strong> c·ªßa database.</em></p>
</li>
</ol>
<h3 id="32-elasticache-redis-c·∫•u-h√¨nh-chi-ti·∫øt">
  3.2 ElastiCache Redis (C·∫•u h√¨nh chi ti·∫øt)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ol>
<li>V√†o <strong>Redis OSS caches</strong> &gt; <strong>Create Redis OSS cache</strong>.</li>
</ol>
<h4 id="step-1-settings">
  Step 1: SETTINGS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Cluster settings:</strong></p>
<ul>
<li>
<p>Engine: <strong>Redis OSS</strong>.</p>
</li>
<li>
<p>Deployment option: <strong>Node-based cluster</strong>.</p>
</li>
<li>
<p>Creation method: <strong>Cluster cache</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Cluster info:</strong></p>
<ul>
<li>
<p>Cluster mode: <strong>Disabled</strong>.</p>
</li>
<li>
<p>Name: <code>sgu-redis</code>.</p>
</li>
<li>
<p>Multi-AZ: <strong>Uncheck (Disable)</strong>.</p>
</li>
<li>
<p>Auto-failover: <strong>Uncheck (Disable)</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Cache settings:</strong></p>
<ul>
<li>
<p>Node type: <strong><code>cache.t3.micro</code></strong>.</p>
</li>
<li>
<p>Number of replicas: <strong>0</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Connectivity:</strong></p>
<ul>
<li>
<p>Subnet groups: <strong>Create a new subnet group</strong>.</p>
<ul>
<li>
<p>Name: <code>sgu-redis-subnet-group</code>.</p>
</li>
<li>
<p>VPC ID: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Selected subnets: Ch·ªçn 2 <strong>Private Subnets</strong>.</p>
</li>
</ul>
</li>
<li>
<p>Availability Zone placements: <strong>Specify Availability Zones</strong>.</p>
<ul>
<li>Primary: <strong><code>ap-southeast-1a</code></strong>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="step-2-advanced-settings">
  Step 2: ADVANCED SETTINGS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Security:</strong></p>
<ul>
<li>Selected security groups: Ch·ªçn <strong><code>private-db-sg</code></strong> (B·ªè default).</li>
</ul>
</li>
<li>
<p><strong>Backup:</strong> Enable automatic backups: <strong>Uncheck (Disable)</strong>.</p>
</li>
<li>
<p><strong>Logs:</strong> Disable h·∫øt.</p>
</li>
</ul>
<p><em>(Nh·∫•n Create. Sau khi xong, copy <strong>Primary Endpoint</strong>).</em></p>
<h3 id="33-kafka-docker-tr√™n-ecs">
  3.3 Kafka (Docker tr√™n ECS)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><strong>B∆∞·ªõc 1: T·∫°o Namespace</strong></p>
<ol>
<li>
<p>V√†o <strong>Cloud Map</strong> &gt; <strong>Create namespace</strong>.</p>
</li>
<li>
<p>Name: <code>sgu.local</code>.</p>
</li>
<li>
<p>Instance discovery: <strong>API calls and DNS queries in VPCs</strong>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Create.</p>
</li>
</ol>
<p><strong>B∆∞·ªõc 2: T·∫°o Task Definition cho Kafka</strong></p>
<ol>
<li>
<p>V√†o ECS &gt; Task Definitions &gt; Create.</p>
</li>
<li>
<p>Family: <code>kafka-server-td</code>.</p>
</li>
<li>
<p>Container:</p>
<ul>
<li>
<p>Name: <code>kafka-server</code></p>
</li>
<li>
<p>Image: <code>bitnami/kafka:latest</code></p>
</li>
<li>
<p>Port: <code>9092</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
<ul>
<li>
<p><code>KAFKA_CFG_NODE_ID</code> = <code>0</code></p>
</li>
<li>
<p><code>KAFKA_CFG_PROCESS_ROLES</code> = <code>controller,broker</code></p>
</li>
<li>
<p><code>KAFKA_CFG_LISTENERS</code> = <code>PLAINTEXT://:9092,CONTROLLER://:9093</code></p>
</li>
<li>
<p><code>KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP</code> = <code>CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT</code></p>
</li>
<li>
<p><code>KAFKA_CFG_CONTROLLER_QUORUM_VOTERS</code> = <code>0@kafka.sgu.local:9093</code></p>
</li>
<li>
<p><code>KAFKA_CFG_ADVERTISED_LISTENERS</code> = <code>PLAINTEXT://kafka.sgu.local:9092</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Create.</p>
</li>
</ol>
<p><strong>B∆∞·ªõc 3: Deploy Kafka Service</strong></p>
<ol>
<li>
<p>ECS &gt; Cluster &gt; Services &gt; Create.</p>
</li>
<li>
<p>Family: <code>kafka-server-td</code>. Service name: <code>svc-kafka</code>.</p>
</li>
<li>
<p><strong>Networking:</strong></p>
<ul>
<li>
<p>Subnets: <strong>2 Public Subnets</strong> (B·∫Øt bu·ªôc v√¨ kh√¥ng c√≥ NAT).</p>
</li>
<li>
<p>Security Group: <code>private-db-sg</code>.</p>
</li>
<li>
<p>Public IP: <strong>Turned ON</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Service Connect and Service Discovery:</strong></p>
<ul>
<li>
<p>Use service discovery: <strong>Check</strong>.</p>
</li>
<li>
<p>Namespace: <code>sgu.local</code>.</p>
</li>
<li>
<p>Service name: <code>kafka</code>. (K·∫øt qu·∫£ DNS: <code>kafka.sgu.local</code>).</p>
</li>
</ul>
</li>
</ol>
<h3 id="34-kh·ªüi-t·∫°o-database-chi-ti·∫øt">
  3.4 Kh·ªüi t·∫°o Database (Chi ti·∫øt)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><strong>1. Update Security Group:</strong></p>
<ul>
<li>V√†o <code>private-db-sg</code> &gt; Inbound Rules &gt; Add: <code>MySQL (3306)</code> | Source: <code>bastion-sg</code>.</li>
</ul>
<p><strong>2. T·∫°o Bastion Host (EC2):</strong></p>
<ul>
<li>
<p>Launch Instance &gt; Name <code>sgu-bastion</code> &gt; AMI <strong>Amazon Linux 2023</strong> &gt; Type <code>t3.micro</code>.</p>
</li>
<li>
<p>Key pair: T·∫°o m·ªõi <code>sgutodolist-key</code> (t·∫£i v·ªÅ m√°y).</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Subnet: <strong>Public Subnet 1</strong>.</p>
</li>
<li>
<p>Auto-assign public IP: <strong>Enable</strong> (B·∫Øt bu·ªôc).</p>
</li>
<li>
<p>Security groups: Ch·ªçn <code>bastion-sg</code>.</p>
</li>
</ul>
<p><strong>3. Init Database (Ch·∫°y l·ªánh t·ª´ m√°y Local):</strong></p>
<ul>
<li>
<p>M·ªü Terminal VS Code t·∫°i th∆∞ m·ª•c ch·ª©a <code>sgu-key.pem</code>.</p>
</li>
<li>
<p><strong>B∆∞·ªõc 1: SSH v√†o Bastion</strong></p>
<p>PowerShell</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code># V·ªõi Windows
icacls &#34;sgutodolist-key.pem&#34; /inheritance:r
icacls &#34;sgutodolist-key.pem&#34; /grant:r &#34;$($env:USERNAME):(R)&#34;
ssh -i &#34;sgu-key.pem&#34; ec2-user@&lt;PUBLIC-IP-BASTION&gt; (Public IPv4 address c·ªßa m√°y ch·ªß EC2 sgu-bastion)


# V·ªõi Mac/Linux
chmod 400 sgu-key.pem
ssh -i sgu-key.pem ec2-user@&lt;PUBLIC-IP-BASTION&gt;</code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 2: C√†i MySQL Client (tr√™n Bastion)</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf install mariadb105 -y</span></span></code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 3: K·∫øt n·ªëi RDS</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>mysql -h sgu-todolist-db.cnsww4so4xfb.ap-southeast-1.rds.amazonaws.com -u root -p
sgu-todolist-db.cnsww4so4xfb.ap-southeast-1.rds.amazonaws.com
# Nh·∫≠p password: 12345678</code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 4: T·∫°o Database (SQL)</strong></p>
<p>SQL</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>CREATE DATABASE aws_todolist_database CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
SHOW DATABASES;
EXIT;</code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 5:</strong> G√µ <code>exit</code> ƒë·ªÉ tho√°t kh·ªèi Bastion.</p>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-4-c·∫≠p-nh·∫≠t-code--build-image">
  GIAI ƒêO·∫†N 4: C·∫¨P NH·∫¨T CODE &amp; BUILD IMAGE







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="41-c·∫•u-h√¨nh-api-gateway-quan-tr·ªçng">
  4.1 C·∫•u h√¨nh API Gateway (Quan tr·ªçng)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Ta c·∫ßn l√†m 2 vi·ªác t·∫°i source code c·ªßa <strong>API Gateway</strong>:</p>
<p><strong>B∆∞·ªõc 1: T·∫°o file c·∫•u h√¨nh CORS (Java)</strong> File n√†y gi√∫p x·ª≠ l√Ω CORS to√†n c·ª•c m·ªôt c√°ch ch√≠nh x√°c tr√™n m√¥i tr∆∞·ªùng Reactive.</p>
<ul>
<li>
<p><strong>File:</strong> <code>src/main/java/aws/todolist/api_gateway/config/CorsConfig.java</code></p>
</li>
<li>
<p><strong>N·ªôi dung:</strong></p>
</li>
</ul>
<p>Java</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>package aws.todolist.api_gateway.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.reactive.CorsWebFilter;
import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;
import java.util.Arrays;

@Configuration
public class CorsConfig {

    @Bean
    public CorsWebFilter corsWebFilter() {
        CorsConfiguration corsConfig = new CorsConfiguration();

        // 1. Cho ph√©p c√°c Domain n√†y g·ªçi API
        corsConfig.setAllowedOrigins(Arrays.asList(
            &#34;https://sgutodolist.com&#34;,
            &#34;https://www.sgutodolist.com&#34;,
            &#34;http://localhost:3000&#34;, // Frontend Dev
            &#34;http://localhost:4200&#34;, // Frontend Dev (Backup)
            &#34;http://localhost:5500&#34;
        ));

        // 2. C·∫•u h√¨nh method v√† header
        corsConfig.setMaxAge(3600L);
        corsConfig.addAllowedMethod(&#34;*&#34;); // GET, POST, PUT, DELETE...
        corsConfig.addAllowedHeader(&#34;*&#34;);
        corsConfig.setAllowCredentials(true);

        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration(&#34;/**&#34;, corsConfig);

        return new CorsWebFilter(source);
    }
}</code></pre></div>
<p>*<em>B∆∞·ªõc 2: C·∫≠p nh·∫≠t <code>application.yml</code> (Chu·∫©n h√≥a bi·∫øn m√¥i tr∆∞·ªùng)</em></p>
<ul>
<li><strong>File:</strong> <code>src/main/resources/application.yml</code></li>
</ul>
<p>YAML</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>server:
  port: 8080

jwt:
  secret: 843567893696976453275974432697R634976R738467TR678T34865R6834R8763T478378637664538745673865783678548735687R3

spring:
  application:
    name: api-gateway

  cloud:
    gateway:
      # ‚ö†Ô∏è ƒê√£ t·∫Øt Global CORS ·ªü ƒë√¢y ƒë·ªÉ d√πng file Java CorsConfig.java (tr√°nh xung ƒë·ªôt)
      # globalcors: ... (ƒê√£ comment)

      # üîπ Routes Configuration (S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng t·ª´ ECS Task Def)
      routes:
        - id: ai-model-service
          uri: ${AI_MODEL_SERVICE:http://localhost:9997}
          predicates:
            - Path=/api/model/**

        - id: user-service
          uri: ${USER_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/api/user/**

        - id: taskflow-service
          uri: ${TASKFLOW_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/api/taskflow/**

        - id: auth-service
          uri: ${AUTH_SERVICE_URL:http://localhost:9999}
          predicates:
            - Path=/api/auth/**

        # üîπ Notification Routes
        - id: notification-ws
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:9998}
          predicates:
            - Path=/api/notification/ws/**

        - id: notification-rest
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:9998}
          predicates:
            - Path=/api/notification/**

  # üß± Redis Configuration (S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng)
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:redis}
      port: ${SPRING_DATA_REDIS_PORT:6379}
      timeout: 6000
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms

# =========================
# ‚öôÔ∏è Management &amp; Monitoring
# =========================
management:
  endpoints:
    web:
      exposure:
        include: &#34;*&#34;
  endpoint:
    health:
      show-details: always

# =========================
# üß≠ SpringDoc Swagger UI
# =========================
springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    urls:
      # S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng ƒë·ªÉ Swagger ho·∫°t ƒë·ªông ƒë√∫ng tr√™n Domain th·∫≠t
      - name: user-service
        url: ${USER_SERVICE_URL:http://localhost:8081}/api/user/v3/api-docs
      - name: taskflow-service
        url: ${TASKFLOW_SERVICE_URL:http://localhost:8082}/api/taskflow/v3/api-docs
      - name: auth-service
        url: ${AUTH_SERVICE_URL:http://localhost:9999}/api/auth/v3/api-docs
      - name: notification-service
        url: ${NOTIFICATION_SERVICE_URL:http://localhost:9998}/api/notification/v3/api-docs</code></pre></div>
<hr>
<h3 id="42-build--push-6-images-l√™n-ecr">
  4.2 Build &amp; Push 6 Images l√™n ECR







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>M·ªü Terminal t·∫°i th∆∞ m·ª•c g·ªëc c·ªßa d·ª± √°n (<code>todolist-backend</code>), ch·∫°y l·∫ßn l∆∞·ª£t c√°c l·ªánh sau:</p>
<p><strong>1. ƒêƒÉng nh·∫≠p ECR:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>aws ecr get-login-password --region ap-southeast-1 | docker login --username AWS --password-stdin 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com</code></pre></div>
<p><strong>2. Build &amp; Push l·∫ßn l∆∞·ª£t 6 Services:</strong></p>
<ul>
<li>
<p><strong>API Gateway:</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd api-gateway
</span></span><span style="display:flex;"><span>docker build -t api-gateway:latest .
</span></span><span style="display:flex;"><span>docker tag api-gateway:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/api-gateway:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/api-gateway:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
</li>
<li>
<p><strong>Auth Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd auth-service
docker build -t auth-service:latest .
docker tag auth-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/auth-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/auth-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>User Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd user-service
docker build -t user-service:latest .
docker tag user-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/user-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/user-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>Taskflow Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd taskflow-service
docker build -t taskflow-service:latest .
docker tag taskflow-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/taskflow-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/taskflow-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>Notification Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd notification-service
docker build -t notification-service:latest .
docker tag notification-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/notification-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/notification-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>AI Model Service:</strong> <em>L∆∞u √Ω: Th∆∞ m·ª•c ch·ª©a code AI c·ªßa b·∫°n t√™n l√† <code>model</code> trong docker-compose</em></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd model
docker build -t ai-model-service:latest .
docker tag ai-model-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/ai-model-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/ai-model-service:latest
cd ..</code></pre></div>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https">
  GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li>
<p><strong>Target Groups:</strong> T·∫°o 5 c√°i (<code>IP addresses</code>, <code>HTTP</code>).</p>
<ul>
<li>
<p><code>api-gateway-tg</code>: 8080</p>
</li>
<li>
<p><code>auth-tg</code>: 9999</p>
</li>
<li>
<p><code>user-tg</code>: 8081</p>
</li>
<li>
<p><code>task-tg</code>: 8082</p>
</li>
<li>
<p><code>noti-tg</code>: 9998</p>
</li>
<li>
<p><em>(Kh√¥ng c·∫ßn t·∫°o TG cho AI Model v√¨ Gateway g·ªçi n·ªôi b·ªô).</em></p>
</li>
</ul>
</li>
<li>
<p><strong>Load Balancer:</strong></p>
<ul>
<li>
<p>T·∫°o ALB <code>sgu-alb</code>. Scheme: <strong>Internet-facing</strong>.</p>
</li>
<li>
<p>Subnets: <strong>2 Public Subnets</strong>. Security Group: <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Listener <strong>HTTPS:443</strong>: Forward to <code>tg-api-gateway</code>. Certificate <code>api.sgutodolist.com</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Rules (HTTPS Listener):</strong></p>
<ul>
<li>
<p>Path <code>/api/auth/*</code> -&gt; <code>tg-auth</code>.</p>
</li>
<li>
<p>Path <code>/api/users/*</code> -&gt; <code>tg-user</code>.</p>
</li>
<li>
<p>Path <code>/api/tasks/*</code> -&gt; <code>tg-task</code>.</p>
</li>
<li>
<p>Path <code>/api/notifications/*</code> -&gt; <code>tg-noti</code>.</p>
</li>
<li>
<p>Default -&gt; <code>tg-api-gateway</code>.</p>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https-1">
  GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li><strong>Target Groups:</strong> T·∫°o 5 c√°i (<code>IP addresses</code>, <code>HTTP</code>).</li>
</ol>
<p><strong>T·∫°o 5 Target Groups</strong></p>
<p>Ta c·∫ßn l·∫∑p l·∫°i quy tr√¨nh d∆∞·ªõi ƒë√¢y <strong>5 l·∫ßn</strong> cho 5 service, ch·ªâ thay ƒë·ªïi <strong>Name</strong> v√† <strong>Port</strong>.</p>
<p><strong>Quy tr√¨nh chu·∫©n cho m·ªói Target Group:</strong></p>
<p><strong>Step 1: Create target group</strong></p>
<ul>
<li>
<p><strong>Target type:</strong> Ch·ªçn <strong>IP addresses</strong> (B·∫Øt bu·ªôc cho Fargate).</p>
</li>
<li>
<p><strong>Target group name:</strong> Nh·∫≠p t√™n t∆∞∆°ng ·ª©ng (v√≠ d·ª•: <code>api-gateway-tg</code>).</p>
</li>
<li>
<p><strong>Protocol:</strong> Ch·ªçn <strong>HTTP</strong>.</p>
</li>
<li>
<p><strong>Port:</strong> Nh·∫≠p port t∆∞∆°ng ·ª©ng (v√≠ d·ª•: <code>8080</code>).</p>
</li>
<li>
<p><strong>IP address type:</strong> <strong>IPv4</strong>.</p>
</li>
<li>
<p><strong>VPC:</strong> Ch·ªçn <code>SGU-Microservices-vpc</code>.</p>
</li>
<li>
<p><strong>Protocol version:</strong> <strong>HTTP1</strong>.</p>
</li>
<li>
<p><strong>Health checks:</strong></p>
<ul>
<li>
<p><strong>Health check protocol:</strong> <strong>HTTP</strong>.</p>
</li>
<li>
<p><strong>Health check path:</strong> Nh·∫≠p <code>/actuator/health</code> (Thay cho d·∫•u <code>/</code> m·∫∑c ƒë·ªãnh).</p>
</li>
</ul>
</li>
<li>
<p><em>C√°c ph·∫ßn kh√°c (Advanced health check settings, Tags&hellip;):</em> Gi·ªØ nguy√™n.</p>
</li>
<li>
<p>Nh·∫•n <strong>Next</strong>.</p>
</li>
</ul>
<p><strong>Step 2: Register targets</strong></p>
<ul>
<li>
<p>‚ö†Ô∏è <strong>QUAN TR·ªåNG:</strong> T·∫°i m√†n h√¨nh n√†y, ta <strong>KH√îNG L√ÄM G√å C·∫¢</strong>.</p>
</li>
<li>
<p>Kh√¥ng nh·∫≠p IP, kh√¥ng nh·∫•n &ldquo;Include as pending&rdquo;.</p>
</li>
<li>
<p><em>L√Ω do:</em> Khi ta Deploy ECS Service ·ªü Giai ƒëo·∫°n 7, ECS s·∫Ω t·ª± ƒë·ªông th√™m IP c·ªßa container v√†o ƒë√¢y.</p>
</li>
<li>
<p>Nh·∫•n n√∫t <strong>Next</strong>.</p>
</li>
</ul>
<p><strong>Step 3: Review and create</strong></p>
<ul>
<li>Nh·∫•n n√∫t <strong>Create target group</strong>.</li>
</ul>
<p><strong>Danh s√°ch th√¥ng s·ªë cho 5 Target Groups:</strong></p>
<p>B·∫°n h√£y t·∫°o l·∫ßn l∆∞·ª£t v·ªõi c√°c th√¥ng s·ªë sau (c√°c th√¥ng s·ªë kh√°c gi·ªëng h·ªát h∆∞·ªõng d·∫´n tr√™n):</p>
<table>
  <thead>
      <tr>
          <th><strong>S·ªë TT</strong></th>
          <th><strong>Target Group Name</strong></th>
          <th><strong>Port</strong></th>
          <th><strong>Health Check Path</strong></th>
          <th><strong>Ghi ch√∫</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td><strong><code>api-gateway-tg</code></strong></td>
          <td><strong>8080</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho API Gateway</td>
      </tr>
      <tr>
          <td>2</td>
          <td><strong><code>auth-tg</code></strong></td>
          <td><strong>9999</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho Auth Service</td>
      </tr>
      <tr>
          <td>3</td>
          <td><strong><code>user-tg</code></strong></td>
          <td><strong>8081</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho User Service</td>
      </tr>
      <tr>
          <td>4</td>
          <td><strong><code>task-tg</code></strong></td>
          <td><strong>8082</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho TaskFlow</td>
      </tr>
      <tr>
          <td>5</td>
          <td><strong><code>noti-tg</code></strong></td>
          <td><strong>9998</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho Notification</td>
      </tr>
  </tbody>
</table>
<h3 id="2-t·∫°o-application-load-balancer-alb">
  2. T·∫°o Application Load Balancer (ALB)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>V√†o <strong>EC2 Console</strong> &gt; <strong>Load Balancers</strong> &gt; <strong>Create load balancer</strong>.</p>
<p><strong>Step 1: Basic configuration</strong></p>
<ul>
<li>
<p><strong>Load balancer type:</strong> Ch·ªçn <strong>Application Load Balancer</strong>.</p>
</li>
<li>
<p><strong>Load balancer name:</strong> <code>sgu-alb</code>.</p>
</li>
<li>
<p><strong>Scheme:</strong> Ch·ªçn <strong>Internet-facing</strong> (Quan tr·ªçng: ƒê·ªÉ user t·ª´ internet truy c·∫≠p ƒë∆∞·ª£c).</p>
</li>
<li>
<p><strong>IP address type:</strong> <strong>IPv4</strong>.</p>
</li>
</ul>
<p><strong>Step 2: Network mapping</strong></p>
<ul>
<li>
<p><strong>VPC:</strong> Ch·ªçn <code>SGU-Microservices-vpc</code>.</p>
</li>
<li>
<p><strong>Mappings (Availability Zones):</strong> B·∫°n ph·∫£i ch·ªçn 2 Zones v√† <strong>2 Public Subnets</strong>:</p>
<ul>
<li>
<p>T√≠ch ch·ªçn <strong>ap-southeast-1a</strong> -&gt; Ch·ªçn Subnet <strong>Public 1</strong> (V√≠ d·ª•: <code>...public1...</code>).</p>
</li>
<li>
<p>T√≠ch ch·ªçn <strong>ap-southeast-1b</strong> -&gt; Ch·ªçn Subnet <strong>Public 2</strong> (V√≠ d·ª•: <code>...public2...</code>).</p>
</li>
<li>
<p><em>L√Ω do:</em> ALB ph·∫£i n·∫±m ·ªü Public Subnet ƒë·ªÉ nh·∫≠n traffic t·ª´ Internet.</p>
</li>
</ul>
</li>
</ul>
<p><strong>Step 3: Security groups</strong></p>
<ul>
<li>
<p>B·ªè ch·ªçn <code>default</code>.</p>
</li>
<li>
<p>Ch·ªçn <strong><code>public-alb-sg</code></strong>.</p>
</li>
</ul>
<p><strong>Step 4: Listeners and routing (T·∫°o 2 Listener)</strong></p>
<ul>
<li>
<p><strong>Listener 1 (HTTP:80):</strong> (C√≥ s·∫µn m·∫∑c ƒë·ªãnh)</p>
<ul>
<li>
<p>Protocol: <code>HTTP</code> | Port: <code>80</code>.</p>
</li>
<li>
<p><strong>Default action:</strong> Ch·ªçn Forward to target group -&gt; <strong><code>api-gateway-tg</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Listener 2 (HTTPS:443):</strong> (B·∫°n b·∫•m n√∫t <strong>Add listener</strong> ƒë·ªÉ th√™m d√≤ng n√†y)</p>
<ul>
<li>
<p>Protocol: <code>HTTPS</code> | Port: <code>443</code>.</p>
</li>
<li>
<p><strong>Default action:</strong> Ch·ªçn Forward to target group -&gt; <strong><code>api-gateway-tg</code></strong>.</p>
</li>
<li>
<p><strong>Secure listener settings:</strong></p>
<ul>
<li>
<p><strong>Certificate source:</strong> ACM.</p>
</li>
<li>
<p><strong>Certificate:</strong> Ch·ªçn ch·ª©ng ch·ªâ <code>api.sgutodolist.com</code> (ƒë√£ t·∫°o ·ªü Giai ƒëo·∫°n 2).</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Step 5: Review &amp; Create</strong></p>
<ul>
<li>
<p>Nh·∫•n <strong>Create load balancer</strong>.</p>
</li>
<li>
<p><em>ƒê·ª£i kho·∫£ng 2-3 ph√∫t ƒë·ªÉ State chuy·ªÉn t·ª´ <code>Provisioning</code> sang <code>Active</code>.</em></p>
</li>
</ul>
<hr>
<h3 id="3-c·∫•u-h√¨nh-routing-rules-quy-tr√¨nh-chu·∫©n-2-b∆∞·ªõc">
  3. C·∫•u h√¨nh Routing Rules (Quy tr√¨nh chu·∫©n 2 b∆∞·ªõc)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Ch√∫ng ta s·∫Ω th√™m <strong>4 Rules</strong> m·ªõi. M·∫∑c ƒë·ªãnh ALB ƒë√£ c√≥ Rule cu·ªëi c√πng (Default) tr·ªè v·ªÅ <code>api-gateway-tg</code> r·ªìi, kh√¥ng c·∫ßn s·ª≠a.</p>
<p><strong>B·∫£ng th√¥ng s·ªë c·∫ßn nh·∫≠p:</strong></p>
<table>
  <thead>
      <tr>
          <th><strong>Priority (ƒê·ªô ∆∞u ti√™n)</strong></th>
          <th><strong>T√™n Rule (Name)</strong></th>
          <th><strong>Condition (Path)</strong></th>
          <th><strong>Action (Forward to)</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>1</strong></td>
          <td>Auth Rule</td>
          <td><code>/api/auth/*</code></td>
          <td><strong><code>auth-tg</code></strong></td>
      </tr>
      <tr>
          <td><strong>2</strong></td>
          <td>User Rule</td>
          <td><code>/api/user/*</code></td>
          <td><strong><code>user-tg</code></strong></td>
      </tr>
      <tr>
          <td><strong>3</strong></td>
          <td>Task Rule</td>
          <td><code>/api/taskflow/*</code></td>
          <td><strong><code>task-tg</code></strong></td>
      </tr>
      <tr>
          <td><strong>4</strong></td>
          <td>Noti Rule</td>
          <td><code>/api/notification/*</code></td>
          <td><strong><code>noti-tg</code></strong></td>
      </tr>
  </tbody>
</table>
<p>T·∫°i tab <strong>Listeners and rules</strong> c·ªßa ALB, nh·∫•n <strong>Add rule</strong>.</p>
<h4 id="step-1-define-rule-c·∫•u-h√¨nh-ƒëi·ªÅu-ki·ªán--h√†nh-ƒë·ªông">
  Step 1: Define rule (C·∫•u h√¨nh ƒëi·ªÅu ki·ªán &amp; h√†nh ƒë·ªông)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ol>
<li>
<p><strong>Name and tags:</strong></p>
<ul>
<li><strong>Name:</strong> Nh·∫≠p t√™n rule (V√≠ d·ª•: <code>Auth Rule</code>).</li>
</ul>
</li>
<li>
<p><strong>Conditions:</strong></p>
<ul>
<li>
<p>Nh·∫•n <strong>Add condition</strong>.</p>
</li>
<li>
<p>Ch·ªçn <strong>Path</strong>.</p>
</li>
<li>
<p><strong>Path condition value:</strong> Nh·∫≠p <code>/api/auth/*</code> (Ch√∫ √Ω d·∫•u <code>*</code> ·ªü cu·ªëi).</p>
</li>
<li>
<p>Nh·∫•n <strong>Confirm</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Actions:</strong></p>
<ul>
<li>
<p><strong>Routing action:</strong> Ch·ªçn <strong>Forward to target groups</strong>.</p>
</li>
<li>
<p><strong>Target group:</strong> Ch·ªçn <strong><code>auth-tg</code></strong>.</p>
</li>
<li>
<p><strong>Weight:</strong> <code>1</code> (M·∫∑c ƒë·ªãnh).</p>
</li>
</ul>
</li>
<li>
<p>K√©o xu·ªëng d∆∞·ªõi c√πng, nh·∫•n n√∫t <strong>Next</strong>.</p>
</li>
</ol>
<h4 id="step-2-set-rule-policy-c·∫•u-h√¨nh-ƒë·ªô-∆∞u-ti√™n">
  Step 2: Set rule policy (C·∫•u h√¨nh ƒë·ªô ∆∞u ti√™n)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><p>ƒê√¢y l√† m√†n h√¨nh b·∫°n ƒëang th·∫•y.</p>
<ol>
<li>
<p>T·∫°i √¥ <strong>Priority</strong> (b√™n c·∫°nh t√™n rule b·∫°n v·ª´a t·∫°o):</p>
<ul>
<li>Nh·∫≠p s·ªë <strong><code>1</code></strong> (V√¨ ƒë√¢y l√† Auth Rule).</li>
</ul>
</li>
<li>
<p>Ki·ªÉm tra l·∫°i danh s√°ch:</p>
<ul>
<li>
<p>D√≤ng Priority 1: Auth Rule (Forward to <code>auth-tg</code>).</p>
</li>
<li>
<p>D√≤ng Last (default): Default (Forward to <code>api-gateway-tg</code>).</p>
</li>
</ul>
</li>
<li>
<p>Nh·∫•n n√∫t <strong>Add rule</strong>.</p>
</li>
</ol>
<p><strong>üëâ L√†m t∆∞∆°ng t·ª± cho 3 rules c√≤n l·∫°i:</strong></p>
<ol>
<li>
<p><strong>User Rule:</strong></p>
<ul>
<li>
<p>Step 1: Path <code>/api/user/*</code> -&gt; Forward to <code>user-tg</code>.</p>
</li>
<li>
<p>Step 2: Priority nh·∫≠p <strong><code>2</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Task Rule:</strong></p>
<ul>
<li>
<p>Step 1: Path <code>/api/taskflow/*</code> -&gt; Forward to <code>task-tg</code>.</p>
</li>
<li>
<p>Step 2: Priority nh·∫≠p <strong><code>3</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Notification Rule:</strong></p>
<ul>
<li>
<p>Step 1: Path <code>/api/notification/*</code> -&gt; Forward to <code>noti-tg</code>.</p>
</li>
<li>
<p>Step 2: Priority nh·∫≠p <strong><code>4</code></strong>.</p>
</li>
</ul>
</li>
</ol>
<hr>
<p>(ƒê√£ ƒë·∫øn kh√∫c n√†y l√∫c 22:26 ng√†y 05/12/2025)</p>
<h2 id="giai-ƒëo·∫°n-6-task-definitions-kh·ªõp-docker-compose">
  GIAI ƒêO·∫†N 6: TASK DEFINITIONS (KH·ªöP DOCKER-COMPOSE)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="1-auth-service--user-service--taskflow-service">
  1. Auth Service &amp; User Service &amp; Taskflow Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><em>(T·∫°o 3 Task ri√™ng, c·∫•u h√¨nh gi·ªëng nhau, kh√°c Image v√† Port)</em></p>
<ul>
<li>
<p><strong>Ports:</strong> Auth (9999), User (8081), Taskflow (8082).</p>
</li>
<li>
<p><strong>Env Vars (Copy ch√≠nh x√°c):</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATASOURCE_URL</code></td>
          <td><code>jdbc:mysql://&lt;RDS-ENDPOINT&gt;:3306/aws_todolist_database?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_USERNAME</code></td>
          <td><code>root</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_PASSWORD</code></td>
          <td><code>12345678</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><code>&lt;REDIS-ENDPOINT&gt;</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
      </tr>
      <tr>
          <td><code>SPRING_KAFKA_BOOTSTRAP_SERVERS</code></td>
          <td><code>kafka.sgu.local:9092</code></td>
      </tr>
      <tr>
          <td><code>SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GOOGLE_REDIRECT_URI</code></td>
          <td><code>https://api.sgutodolist.com/api/auth/login/oauth2/code/google</code></td>
      </tr>
      <tr>
          <td><code>APP_OAUTH2_REDIRECT_URI</code></td>
          <td><code>https://sgutodolist.com/oauth2/redirect</code></td>
      </tr>
  </tbody>
</table>
<p><em>(L∆∞u √Ω: User &amp; Taskflow Service kh√¥ng c·∫ßn c√°c bi·∫øn OAUTH2, ch·ªâ Auth c·∫ßn, nh∆∞ng ƒë·ªÉ chung c≈©ng kh√¥ng l·ªói).</em></p>
<hr>
<h3 id="2-notification-service">
  2. Notification Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ul>
<li>
<p><strong>Port:</strong> 9998.</p>
</li>
<li>
<p><strong>Env Vars:</strong> Gi·ªëng tr√™n, th√™m bi·∫øn <code>CLIENT_URL</code>: <code>https://sgutodolist.com</code>.</p>
</li>
</ul>
<hr>
<h3 id="3-ai-model-service-m·ªõi">
  3. AI Model Service (M·ªöI)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ul>
<li>
<p><strong>Family:</strong> <code>ai-model-service-td</code>.</p>
</li>
<li>
<p><strong>Image:</strong> Link ECR AI Model.</p>
</li>
<li>
<p><strong>Port:</strong> 9997.</p>
</li>
<li>
<p><strong>Env Vars:</strong> (T√πy theo code Flask c·ªßa b·∫°n, n·∫øu kh√¥ng c√≥ th√¨ ƒë·ªÉ tr·ªëng).</p>
</li>
</ul>
<hr>
<h3 id="4-api-gateway-quan-tr·ªçng">
  4. API Gateway (QUAN TR·ªåNG)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ul>
<li>
<p><strong>Port:</strong> 8080.</p>
</li>
<li>
<p><strong>Env Vars:</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><code>&lt;REDIS-ENDPOINT&gt;</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
      </tr>
      <tr>
          <td><code>AUTH_SERVICE_URL</code></td>
          <td><code>https://api.sgutodolist.com/api/auth</code></td>
      </tr>
      <tr>
          <td><code>USER_SERVICE_URL</code></td>
          <td><code>https://api.sgutodolist.com/api/users</code></td>
      </tr>
      <tr>
          <td><code>TASKFLOW_SERVICE_URL</code></td>
          <td><code>https://api.sgutodolist.com/api/tasks</code></td>
      </tr>
      <tr>
          <td><code>NOTIFICATION_SERVICE_URL</code></td>
          <td><code>https://api.sgutodolist.com/api/notifications</code></td>
      </tr>
      <tr>
          <td><code>AI_MODEL_SERVICE</code></td>
          <td><code>http://ai-model.sgu.local:9997</code></td>
      </tr>
      <tr>
          <td><code>CORS_ALLOWED_ORIGINS</code></td>
          <td><code>https://sgutodolist.com,https://www.sgutodolist.com</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="giai-ƒëo·∫°n-7-deploy-services">
  GIAI ƒêO·∫†N 7: DEPLOY SERVICES







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><p>Deploy l·∫ßn l∆∞·ª£t 6 Services (Auth, User, Taskflow, Notification, Gateway, AI Model).</p>
<p><strong>C·∫§U H√åNH CHUNG KHI T·∫†O SERVICE:</strong></p>
<ol>
<li>
<p><strong>VPC:</strong> <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Subnets:</strong> <strong>2 PUBLIC SUBNETS</strong>. (B·∫Øt bu·ªôc v√¨ kh√¥ng c√≥ NAT).</p>
</li>
<li>
<p><strong>Security Group:</strong> <code>ecs-app-sg</code>.</p>
</li>
<li>
<p><strong>Public IP:</strong> <strong>TURN ON</strong> (B·∫Øt bu·ªôc).</p>
</li>
</ol>
<p><strong>RI√äNG CHO AI MODEL SERVICE:</strong></p>
<ul>
<li>
<p>Khi t·∫°o service <code>svc-ai-model</code>:</p>
</li>
<li>
<p><strong>Service discovery:</strong> Check.</p>
</li>
<li>
<p>Namespace: <code>sgu.local</code>.</p>
</li>
<li>
<p>Service name: <code>ai-model</code>.</p>
</li>
<li>
<p><em>(ƒê·ªÉ Gateway g·ªçi ƒë∆∞·ª£c qua <code>http://ai-model.sgu.local:9997</code>).</em></p>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-8-ho√†n-t·∫•t">
  GIAI ƒêO·∫†N 8: HO√ÄN T·∫§T







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li>
<p><strong>Route 53:</strong> T·∫°o A Record <code>api.sgutodolist.com</code> tr·ªè v·ªÅ ALB.</p>
</li>
<li>
<p><strong>Google Console:</strong> Add Redirect URI <code>https://api.sgutodolist.com/api/auth/login/oauth2/code/google</code>.</p>
</li>
</ol>
<p><strong>CHECKLIST:</strong></p>
<ul>
<li>
<p>V√†o <code>https://api.sgutodolist.com/actuator/health</code> -&gt; OK.</p>
</li>
<li>
<p>V√†o <code>https://sgutodolist.com</code> -&gt; Login -&gt; OK.</p>
</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="../../../../en/index.html">
            <div class="logo-title">Internship Report</div>
          </a>
        </div>
        <search><form action="../../../../en/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="../../../../en/index.html"><a class="padding" href="../../../../en/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="../../../../en/1-worklog/index.html"><a class="padding" href="../../../../en/1-worklog/index.html"><b>1. </b>Worklog</a><ul id="R-subsections-16447363d800ec5deaa3b0a76c63c922" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="../../../../en/2-proposal/index.html"><a class="padding" href="../../../../en/2-proposal/index.html"><b>2. </b>Proposal</a></li>
            <li class="" data-nav-url="../../../../en/3-translated_blogs/index.html"><a class="padding" href="../../../../en/3-translated_blogs/index.html"><b>3. </b>Translated Blogs</a><ul id="R-subsections-0acade1cd81cfef73c977718aa56c877" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="../../../../en/4-events_participated/index.html"><a class="padding" href="../../../../en/4-events_participated/index.html"><b>4. </b>Events Participated</a></li>
            <li class="parent " data-nav-url="../../../../en/5-workshop/index.html"><a class="padding" href="../../../../en/5-workshop/index.html"><b>5. </b>Workshop</a><ul id="R-subsections-3232083df9b680629be5cc26bdd904c0" class="collapsible-menu">
            <li class="" data-nav-url="../../../../en/5-workshop/5.1-workshop_overview/index.html"><a class="padding" href="../../../../en/5-workshop/5.1-workshop_overview/index.html"> <b> 5.1.  </b> Workshop Overview</a></li>
            <li class="" data-nav-url="../../../../en/5-workshop/5.2-prerequisite/index.html"><a class="padding" href="../../../../en/5-workshop/5.2-prerequisite/index.html"> <b> 5.2.  </b> Prerequisite</a></li>
            <li class="parent alwaysopen " data-nav-url="../../../../en/5-workshop/5.3-deploy_flow/index.html"><a class="padding" href="../../../../en/5-workshop/5.3-deploy_flow/index.html"> <b> 5.3.  </b> Deploy Flow</a><ul id="R-subsections-bb7fe7553348ca03cc6bc8ebf581479a" class="collapsible-menu">
            <li class="alwaysopen " data-nav-url="../../../../en/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/index.html"><a class="padding" href="../../../../en/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/index.html"> <b> 5.3.1. </b> Frontend Deploy</a><ul id="R-subsections-d09eca34c02fd87267f3fac7e509af1c" class="collapsible-menu"></ul></li>
            <li class="active hidden " data-nav-url="../../../../en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"><a class="padding" href="../../../../en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"></a></li></ul></li>
            <li class="" data-nav-url="../../../../en/5-workshop/5.4-clean_up/index.html"><a class="padding" href="../../../../en/5-workshop/5.4-clean_up/index.html"> <b> 5.4.  </b> Clean Up</a></li>
            <li class="" data-nav-url="../../../../en/5-workshop/5.5-mystic-skills/index.html"><a class="padding" href="../../../../en/5-workshop/5.5-mystic-skills/index.html"><b>5.5. </b>Mystic Skills</a></li></ul></li>
            <li class="" data-nav-url="../../../../en/6-self-assesment/index.html"><a class="padding" href="../../../../en/6-self-assesment/index.html"><b>6. </b>Self Assesment</a></li>
            <li class="" data-nav-url="../../../../en/7-sharing_and_feedback/index.html"><a class="padding" href="../../../../en/7-sharing_and_feedback/index.html"><b>7. </b>Sharing and Feedback</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
			<li class="R-languageswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-language"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-language">Language</label>
                  <select id="R-select-language">
                    <option id="R-select-language-en" value="en" data-url="../../../../en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html" lang="en" selected data-selected>English</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
            </li>
            <li class="R-variantswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-paint-brush"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-variant">Theme</label>
                  <select id="R-select-variant">
                    <option id="R-select-variant-relearn-light" value="relearn-light" selected>Relearn Light</option>
                    <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
              <script>window.relearn.markVariant();</script>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="../../../../AWS-Workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1764948485" defer></script>
    <script src="../../../../AWS-Workshop/js/theme.min.js?1764948485" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>

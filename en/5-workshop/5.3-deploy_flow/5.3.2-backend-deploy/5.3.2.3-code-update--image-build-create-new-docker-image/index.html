<!DOCTYPE html>
<html lang="en" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.149.1">
    <meta name="generator" content="Relearn 8.2.0+fe198b0077bd441c984854c0a0610da02b2162f8">
    <meta name="description" content="This phase prepares the application code and builds Docker images for deployment to ECR.
API Gateway ConfigurationThe API Gateway requires specific configuration changes to support the AWS deployment environment.
CORS Configuration FilePurpose: Handle Cross-Origin Resource Sharing for the React frontend in a reactive environment.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Code Update & Image Build (Create new Docker Image) :: Internship Report">
    <meta name="twitter:description" content="This phase prepares the application code and builds Docker images for deployment to ECR.
API Gateway ConfigurationThe API Gateway requires specific configuration changes to support the AWS deployment environment.
CORS Configuration FilePurpose: Handle Cross-Origin Resource Sharing for the React frontend in a reactive environment.">
    <meta property="og:url" content="https://Ttuandatt.github.io/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.3-code-update--image-build-create-new-docker-image/index.html">
    <meta property="og:site_name" content="Internship Report">
    <meta property="og:title" content="Code Update & Image Build (Create new Docker Image) :: Internship Report">
    <meta property="og:description" content="This phase prepares the application code and builds Docker images for deployment to ECR.
API Gateway ConfigurationThe API Gateway requires specific configuration changes to support the AWS deployment environment.
CORS Configuration FilePurpose: Handle Cross-Origin Resource Sharing for the React frontend in a reactive environment.">
    <meta property="og:locale" content="en">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="Code Update & Image Build (Create new Docker Image) :: Internship Report">
    <meta itemprop="description" content="This phase prepares the application code and builds Docker images for deployment to ECR.
API Gateway ConfigurationThe API Gateway requires specific configuration changes to support the AWS deployment environment.
CORS Configuration FilePurpose: Handle Cross-Origin Resource Sharing for the React frontend in a reactive environment.">
    <meta itemprop="wordCount" content="504">
    <title>Code Update &amp; Image Build (Create new Docker Image) :: Internship Report</title>
    <link href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.3-code-update--image-build-create-new-docker-image/index.xml" rel="alternate" type="application/rss+xml" title="Code Update &amp; Image Build (Create new Docker Image) :: Internship Report">
    <link href="/AWS-Workshop/css/auto-complete/auto-complete.min.css?1765170765" rel="stylesheet">
    <script src="/AWS-Workshop/js/auto-complete/auto-complete.min.js?1765170765" defer></script>
    <script src="/AWS-Workshop/js/search-lunr.min.js?1765170765" defer></script>
    <script src="/AWS-Workshop/js/search.min.js?1765170765" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/AWS-Workshop/searchindex.en.js?1765170765";
    </script>
    <script src="/AWS-Workshop/js/lunr/lunr.min.js?1765170765" defer></script>
    <script src="/AWS-Workshop/js/lunr/lunr.stemmer.support.min.js?1765170765" defer></script>
    <script src="/AWS-Workshop/js/lunr/lunr.multi.min.js?1765170765" defer></script>
    <script src="/AWS-Workshop/js/lunr/lunr.en.min.js?1765170765" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['en'];
    </script>
    <link href="/AWS-Workshop/fonts/fontawesome/css/fontawesome-all.min.css?1765170765" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/AWS-Workshop/fonts/fontawesome/css/fontawesome-all.min.css?1765170765" rel="stylesheet"></noscript>
    <link href="/AWS-Workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1765170765" rel="stylesheet">
    <link href="/AWS-Workshop/css/theme.min.css?1765170765" rel="stylesheet">
    <link href="/AWS-Workshop/css/format-html.min.css?1765170765" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/5-workshop\/5.3-deploy_flow\/5.3.2-backend-deploy\/5.3.2.3-code-update--image-build-create-new-docker-image\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/Ttuandatt.github.io\/AWS-Workshop';
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'relearn-light', 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/AWS-Workshop/css/custom.css?1765170765" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.3-code-update--image-build-create-new-docker-image/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#api-gateway-configuration">API Gateway Configuration</a></li>
        <li><a href="#docker-image-build-and-push">Docker Image Build and Push</a></li>
        <li><a href="#image-build-verification">Image Build Verification</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/en/index.html"><span itemprop="name">Internship Report</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/en/5-workshop/index.html"><span itemprop="name">Workshop</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/index.html"><span itemprop="name">Deploy Flow</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"><span itemprop="name">Backend Deploy</span></a><meta itemprop="position" content="4">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Code Update &amp; Image Build (Create new Docker Image)</span><meta itemprop="position" content="5"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><a href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.2-infrastructure--alb-setup-rds-redis-cloud-map-alb-routing/index.html" title="Infrastructure & ALB Setup (RDS, Redis, Cloud Map, ALB Routing) (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><a href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.4-task-definitions-creation-configure-settings-fix-environment-variables/index.html" title="Task Definitions Creation (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 5-workshop" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="code-update--image-build-create-new-docker-image">Code Update &amp; Image Build (Create new Docker Image)</h1>

<p>This phase prepares the application code and builds Docker images for deployment to ECR.</p>
<h3 id="api-gateway-configuration">
  API Gateway Configuration







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>The API Gateway requires specific configuration changes to support the AWS deployment environment.</p>
<h4 id="cors-configuration-file">
  CORS Configuration File







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><p><strong>Purpose</strong>: Handle Cross-Origin Resource Sharing for the React frontend in a reactive environment.</p>
<p><strong>File Location</strong>: <code>api-gateway/src/main/java/aws/todolist/api_gateway/config/CorsConfig.java</code></p>
<p><strong>Content:</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> aws.todolist.api_gateway.config;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.context.annotation.Bean;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.cors.CorsConfiguration;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.cors.reactive.CorsWebFilter;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Arrays;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">CorsConfig</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> CorsWebFilter <span style="color:#a6e22e">corsWebFilter</span>() {
</span></span><span style="display:flex;"><span>        CorsConfiguration corsConfig <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> CorsConfiguration();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Allowed origins</span>
</span></span><span style="display:flex;"><span>        corsConfig.<span style="color:#a6e22e">setAllowedOrigins</span>(Arrays.<span style="color:#a6e22e">asList</span>(
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;https://sgutodolist.com&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;https://www.sgutodolist.com&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;http://localhost:3000&#34;</span>, <span style="color:#75715e">// Development</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;http://localhost:4200&#34;</span>, <span style="color:#75715e">// Development (backup)</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;http://localhost:5500&#34;</span>
</span></span><span style="display:flex;"><span>        ));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// Configuration</span>
</span></span><span style="display:flex;"><span>        corsConfig.<span style="color:#a6e22e">setMaxAge</span>(3600L);
</span></span><span style="display:flex;"><span>        corsConfig.<span style="color:#a6e22e">addAllowedMethod</span>(<span style="color:#e6db74">&#34;*&#34;</span>);
</span></span><span style="display:flex;"><span>        corsConfig.<span style="color:#a6e22e">addAllowedHeader</span>(<span style="color:#e6db74">&#34;*&#34;</span>);
</span></span><span style="display:flex;"><span>        corsConfig.<span style="color:#a6e22e">setAllowCredentials</span>(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        UrlBasedCorsConfigurationSource source <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> UrlBasedCorsConfigurationSource();
</span></span><span style="display:flex;"><span>        source.<span style="color:#a6e22e">registerCorsConfiguration</span>(<span style="color:#e6db74">&#34;/**&#34;</span>, corsConfig);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> CorsWebFilter(source);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<hr>
<h4 id="application-configuration-update">
  Application Configuration Update







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><p><strong>Purpose</strong>: Enable environment variable-based configuration for dynamic service discovery.</p>
<p><strong>File Location</strong>: <code>api-gateway/src/main/resources/application.yml</code></p>
<p><strong>Content:</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">server</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">port</span>: <span style="color:#ae81ff">8080</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jwt</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">secret</span>: <span style="color:#ae81ff">843567893696976453275974432697R634976R738467TR678T34865R6834R8763T478378637664538745673865783678548735687R3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">spring</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">application</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">api-gateway</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">cloud</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">gateway</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">routes</span>:
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">ai-model-service</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">uri</span>: <span style="color:#ae81ff">${AI_MODEL_SERVICE:http://localhost:9997}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">predicates</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">Path=/api/model/**</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">user-service</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">uri</span>: <span style="color:#ae81ff">${USER_SERVICE_URL:http://localhost:8081}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">predicates</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">Path=/api/user/**</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">taskflow-service</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">uri</span>: <span style="color:#ae81ff">${TASKFLOW_SERVICE_URL:http://localhost:8082}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">predicates</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">Path=/api/taskflow/**</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">auth-service</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">uri</span>: <span style="color:#ae81ff">${AUTH_SERVICE_URL:http://localhost:9999}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">predicates</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">Path=/api/auth/**</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">notification-ws</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">uri</span>: <span style="color:#ae81ff">${NOTIFICATION_SERVICE_URL:http://localhost:9998}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">predicates</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">Path=/api/notification/ws/**</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">notification-rest</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">uri</span>: <span style="color:#ae81ff">${NOTIFICATION_SERVICE_URL:http://localhost:9998}</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">predicates</span>:
</span></span><span style="display:flex;"><span>            - <span style="color:#ae81ff">Path=/api/notification/**</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">data</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">redis</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">host</span>: <span style="color:#ae81ff">${SPRING_DATA_REDIS_HOST:redis}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">port</span>: <span style="color:#ae81ff">${SPRING_DATA_REDIS_PORT:6379}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">timeout</span>: <span style="color:#ae81ff">6000</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">lettuce</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">pool</span>:
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">max-active</span>: <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">max-idle</span>: <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">min-idle</span>: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">max-wait</span>: -<span style="color:#ae81ff">1ms</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">management</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">endpoints</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">web</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">exposure</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">include</span>: <span style="color:#e6db74">&#34;*&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">endpoint</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">health</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">show-details</span>: <span style="color:#ae81ff">always</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">springdoc</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">api-docs</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">enabled</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">swagger-ui</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">urls</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">user-service</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">url</span>: <span style="color:#ae81ff">${USER_SERVICE_URL:http://localhost:8081}/api/user/v3/api-docs</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">taskflow-service</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">url</span>: <span style="color:#ae81ff">${TASKFLOW_SERVICE_URL:http://localhost:8082}/api/taskflow/v3/api-docs</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">auth-service</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">url</span>: <span style="color:#ae81ff">${AUTH_SERVICE_URL:http://localhost:9999}/api/auth/v3/api-docs</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">notification-service</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">url</span>: <span style="color:#ae81ff">${NOTIFICATION_SERVICE_URL:http://localhost:9998}/api/notification/v3/api-docs</span></span></span></code></pre></div>
<hr>
<h3 id="docker-image-build-and-push">
  Docker Image Build and Push







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><strong>Prerequisites:</strong></p>
<ul>
<li>Docker Desktop running</li>
<li>AWS CLI configured</li>
<li>Terminal opened at project root directory (<code>todolist-backend</code>)</li>
</ul>
<p><strong>Step 1: Authenticate with ECR</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws ecr get-login-password --region ap-southeast-1 | docker login --username AWS --password-stdin 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com</span></span></code></pre></div>
<p><strong>Step 2: Build and Push Images</strong></p>
<p>Execute the following commands sequentially for each service:</p>
<h4 id="service-1-api-gateway">
  Service 1: API Gateway







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd api-gateway
</span></span><span style="display:flex;"><span>docker build -t api-gateway:latest .
</span></span><span style="display:flex;"><span>docker tag api-gateway:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/api-gateway:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/api-gateway:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
<h4 id="service-2-auth-service">
  Service 2: Auth Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd auth-service
</span></span><span style="display:flex;"><span>docker build -t auth-service:latest .
</span></span><span style="display:flex;"><span>docker tag auth-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/auth-service:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/auth-service:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
<h4 id="service-3-user-service">
  Service 3: User Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd user-service
</span></span><span style="display:flex;"><span>docker build -t user-service:latest .
</span></span><span style="display:flex;"><span>docker tag user-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/user-service:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/user-service:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
<h4 id="service-4-taskflow-service">
  Service 4: Taskflow Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd taskflow-service
</span></span><span style="display:flex;"><span>docker build -t taskflow-service:latest .
</span></span><span style="display:flex;"><span>docker tag taskflow-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/taskflow-service:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/taskflow-service:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
<h4 id="service-5-notification-service">
  Service 5: Notification Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd notification-service
</span></span><span style="display:flex;"><span>docker build -t notification-service:latest .
</span></span><span style="display:flex;"><span>docker tag notification-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/notification-service:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/notification-service:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
<h4 id="service-6-ai-model-service">
  Service 6: AI Model Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd model
</span></span><span style="display:flex;"><span>docker build -t ai-model-service:latest .
</span></span><span style="display:flex;"><span>docker tag ai-model-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/ai-model-service:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/ai-model-service:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
<hr>
<h3 id="image-build-verification">
  Image Build Verification







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>After pushing all images, verify they are available in ECR:</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aws ecr describe-images --repository-name api-gateway --region ap-southeast-1
</span></span><span style="display:flex;"><span>aws ecr describe-images --repository-name auth-service --region ap-southeast-1
</span></span><span style="display:flex;"><span>aws ecr describe-images --repository-name user-service --region ap-southeast-1
</span></span><span style="display:flex;"><span>aws ecr describe-images --repository-name taskflow-service --region ap-southeast-1
</span></span><span style="display:flex;"><span>aws ecr describe-images --repository-name notification-service --region ap-southeast-1
</span></span><span style="display:flex;"><span>aws ecr describe-images --repository-name ai-model-service --region ap-southeast-1</span></span></code></pre></div>
<p><strong>Checklist:</strong></p>
<ul>
<li><input disabled="" type="checkbox"> All 6 images successfully built without errors</li>
<li><input disabled="" type="checkbox"> All 6 images successfully pushed to ECR</li>
<li><input disabled="" type="checkbox"> Image URIs recorded for Task Definition configuration</li>
</ul>
<hr>
<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
<a href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.2-infrastructure--alb-setup-rds-redis-cloud-map-alb-routing/" style="text-decoration: none; font-weight: bold;">
â¬… BÆ¯á»šC 2: Infrastructure & ALB Setup
</a>
<a href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.4-task-definitions-creation-configure-settings-fix-environment-variables/" style="text-decoration: none; font-weight: bold;">
BÆ¯á»šC 4: Task Definitions Creation âž¡
</a>
</div>
  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/AWS-Workshop/en/index.html">
            <div class="logo-title">Internship Report</div>
          </a>
        </div>
        <search><form action="/AWS-Workshop/en/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/en/index.html"><a class="padding" href="/AWS-Workshop/en/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/en/1-worklog/index.html"><a class="padding" href="/AWS-Workshop/en/1-worklog/index.html"><b>1. </b>Worklog</a><ul id="R-subsections-16447363d800ec5deaa3b0a76c63c922" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/en/2-proposal/index.html"><a class="padding" href="/AWS-Workshop/en/2-proposal/index.html"><b>2. </b>Proposal</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/3-translated_blogs/index.html"><a class="padding" href="/AWS-Workshop/en/3-translated_blogs/index.html"><b>3. </b>Translated Blogs</a><ul id="R-subsections-0acade1cd81cfef73c977718aa56c877" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/en/4-events_participated/index.html"><a class="padding" href="/AWS-Workshop/en/4-events_participated/index.html"><b>4. </b>Events Participated</a><ul id="R-subsections-2ffb5c6e09dd8464b993d0a4a8003912" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="/AWS-Workshop/en/5-workshop/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/index.html"><b>5. </b>Workshop</a><ul id="R-subsections-3232083df9b680629be5cc26bdd904c0" class="collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.1-workshop_overview/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.1-workshop_overview/index.html"> <b> 5.1.  </b> Workshop Overview</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.2-prerequisite/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.2-prerequisite/index.html"> <b> 5.2.  </b> Prerequisite</a></li>
            <li class="parent alwaysopen " data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/index.html"> <b> 5.3.  </b> Deploy Flow</a><ul id="R-subsections-bb7fe7553348ca03cc6bc8ebf581479a" class="collapsible-menu">
            <li class="alwaysopen " data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/index.html"> <b> 5.3.1. </b> Frontend Deploy</a><ul id="R-subsections-d09eca34c02fd87267f3fac7e509af1c" class="collapsible-menu"></ul></li>
            <li class="parent alwaysopen " data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"> <b> 5.3.2. </b> Backend Deploy</a><ul id="R-subsections-1103043f6f9192a37607180161bbde6d" class="collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.1-network--security-preparation-vpc-sg/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.1-network--security-preparation-vpc-sg/index.html"> <b> 5.3.2.1. </b> Network &amp; Security Preparation (VPC, SG)</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.2-infrastructure--alb-setup-rds-redis-cloud-map-alb-routing/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.2-infrastructure--alb-setup-rds-redis-cloud-map-alb-routing/index.html"> <b> 5.3.2.2. </b> Infrastructure &amp; ALB Setup (RDS, Redis, Cloud Map, ALB Routing)</a></li>
            <li class="active " data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.3-code-update--image-build-create-new-docker-image/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.3-code-update--image-build-create-new-docker-image/index.html"> <b> 5.3.2.3. </b> Code Update &amp; Image Build (Create new Docker Image)</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.4-task-definitions-creation-configure-settings-fix-environment-variables/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.4-task-definitions-creation-configure-settings-fix-environment-variables/index.html"> <b> 5.3.2.4. </b> Task Definitions Creation</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.5-services-deployment-following-priority-order-and-verification/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.5-services-deployment-following-priority-order-and-verification/index.html"> <b> 5.3.2.5. </b> Services Deployment (Following priority order and verification)</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.6-completion--verification-route-53-google-console-final-test/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.6-completion--verification-route-53-google-console-final-test/index.html"> <b> 5.3.2.6. </b> Completion &amp; Verification (Route 53, Google Console, Final Test)</a></li></ul></li></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.4-clean_up/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.4-clean_up/index.html"> <b> 5.4.  </b> Clean Up</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/5-workshop/5.5-mystic-skills/index.html"><a class="padding" href="/AWS-Workshop/en/5-workshop/5.5-mystic-skills/index.html"><b>5.5. </b>Mystic Skills</a></li></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/en/6-self-assesment/index.html"><a class="padding" href="/AWS-Workshop/en/6-self-assesment/index.html"><b>6. </b>Self Assesment</a></li>
            <li class="" data-nav-url="/AWS-Workshop/en/7-sharing_and_feedback/index.html"><a class="padding" href="/AWS-Workshop/en/7-sharing_and_feedback/index.html"><b>7. </b>Sharing and Feedback</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
			<li class="R-languageswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-language"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-language">Language</label>
                  <select id="R-select-language">
                    <option id="R-select-language-en" value="en" data-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/5.3.2.3-code-update--image-build-create-new-docker-image/index.html" lang="en" selected data-selected>English</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
            </li>
            <li class="R-variantswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-paint-brush"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-variant">Theme</label>
                  <select id="R-select-variant">
                    <option id="R-select-variant-relearn-light" value="relearn-light" selected>Relearn Light</option>
                    <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
              <script>window.relearn.markVariant();</script>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/AWS-Workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1765170765" defer></script>
    <script src="/AWS-Workshop/js/theme.min.js?1765170765" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>

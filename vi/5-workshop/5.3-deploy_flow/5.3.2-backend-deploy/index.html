<!DOCTYPE html>
<html lang="vi" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.149.1">
    <meta name="generator" content="Relearn 8.2.0+fe198b0077bd441c984854c0a0610da02b2162f8">
    <meta name="robots" content="noindex, nofollow, noarchive, noimageindex">
    <meta name="description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):">
    <meta property="og:url" content="https://Ttuandatt.github.io/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html">
    <meta property="og:site_name" content="B√°o C√°o Th·ª±c T·∫≠p">
    <meta property="og:description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):">
    <meta property="og:locale" content="vi">
    <meta property="og:type" content="website">
    <meta itemprop="description" content="H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)üèó T·ªîNG QUAN H·ªÜ TH·ªêNGRegion: Singapore (ap-southeast-1).
Frontend Domain: https://sgutodolist.com.
Backend Domain: https://api.sgutodolist.com.
Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):">
    <meta itemprop="wordCount" content="3785">
    <title></title>
    <link href="https://Ttuandatt.github.io/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html" rel="alternate" hreflang="x-default">
    <link href="https://Ttuandatt.github.io/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html" rel="alternate" hreflang="en">
    <link href="https://Ttuandatt.github.io/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html" rel="alternate" hreflang="vi">
    <link href="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.xml" rel="alternate" type="application/rss+xml" title="">
    <link href="/AWS-Workshop/css/auto-complete/auto-complete.min.css?1765170766" rel="stylesheet">
    <script src="/AWS-Workshop/js/auto-complete/auto-complete.min.js?1765170766" defer></script>
    <script src="/AWS-Workshop/js/search-lunr.min.js?1765170766" defer></script>
    <script src="/AWS-Workshop/js/search.min.js?1765170766" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/AWS-Workshop/searchindex.vi.js?1765170766";
    </script>
    <script src="/AWS-Workshop/js/lunr/lunr.min.js?1765170766" defer></script>
    <script src="/AWS-Workshop/js/lunr/lunr.stemmer.support.min.js?1765170766" defer></script>
    <script src="/AWS-Workshop/js/lunr/lunr.multi.min.js?1765170766" defer></script>
    <script src="/AWS-Workshop/js/lunr/lunr.vi.min.js?1765170766" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['vi'];
    </script>
    <link href="/AWS-Workshop/fonts/fontawesome/css/fontawesome-all.min.css?1765170766" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/AWS-Workshop/fonts/fontawesome/css/fontawesome-all.min.css?1765170766" rel="stylesheet"></noscript>
    <link href="/AWS-Workshop/css/perfect-scrollbar/perfect-scrollbar.min.css?1765170766" rel="stylesheet">
    <link href="/AWS-Workshop/css/theme.min.css?1765170766" rel="stylesheet">
    <link href="/AWS-Workshop/css/format-html.min.css?1765170766" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/5-workshop\/5.3-deploy_flow\/5.3.2-backend-deploy\/index.html';
      window.relearn.relBasePath='..\/..\/..\/..';
      window.relearn.relBaseUri='..\/..\/..\/..\/..';
      window.relearn.absBaseUri='https:\/\/Ttuandatt.github.io\/AWS-Workshop';
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Sao ch√©p vƒÉn b·∫£n v√†o b·∫£ng t·∫°m`;
      window.T_Copied_to_clipboard = `VƒÉn b·∫£n ƒë√£ sao ch√©p v√†o b·∫£ng t·∫°m!`;
      window.T_Link_copied_to_clipboard = `Li√™n k·∫øt ƒë√£ sao ch√©p v√†o b·∫£ng t·∫°m!`;
      window.T_Reset_view = `ƒê·∫∑t l·∫°i d·∫°ng xem`;
      window.T_View_reset = `Xem ƒë·∫∑t l·∫°i!`;
      window.T_No_results_found = `Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£ n√†o cho "{0}"`;
      window.T_N_results_found = `{1} k·∫øt qu·∫£ ƒë∆∞·ª£c t√¨m th·∫•y cho "{0}"`;
      window.T_Browser_unsupported_feature = `Tr√¨nh duy·ªát n√†y kh√¥ng h·ªó tr·ª£ t√≠nh nƒÉng n√†y`;
      // variant stuff
      window.relearn.themevariants = [ 'relearn-light', 'relearn-dark' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/AWS-Workshop/css/custom.css?1765170766" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="M·ª•c l·ª•c (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#-t·ªïng-quan-h·ªá-th·ªëng">üèó T·ªîNG QUAN H·ªÜ TH·ªêNG</a></li>
    <li><a href="#giai-ƒëo·∫°n-1-chu·∫©n-b·ªã-network--security">GIAI ƒêO·∫†N 1: CHU·∫®N B·ªä NETWORK &amp; SECURITY</a>
      <ul>
        <li><a href="#11-t·∫°o-vpc--subnets">1.1 T·∫°o VPC &amp; Subnets</a></li>
        <li><a href="#12-t·∫°o-security-groups-t∆∞·ªùng-l·ª≠a">1.2 T·∫°o Security Groups (T∆∞·ªùng l·ª≠a)</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-2-thi·∫øt-l·∫≠p-t√™n-mi·ªÅn--ssl">GIAI ƒêO·∫†N 2: THI·∫æT L·∫¨P T√äN MI·ªÄN &amp; SSL</a></li>
    <li><a href="#giai-ƒëo·∫°n-3-c·∫•u-h√¨nh-infrastructure">GIAI ƒêO·∫†N 3: C·∫§U H√åNH INFRASTRUCTURE</a>
      <ul>
        <li><a href="#31-rds-mysql">3.1 RDS MySQL</a></li>
        <li><a href="#32-elasticache-redis-c·∫•u-h√¨nh-chi-ti·∫øt">3.2 ElastiCache Redis (C·∫•u h√¨nh chi ti·∫øt)</a></li>
        <li><a href="#33-kafka-docker-tr√™n-ecs">3.3 Kafka (Docker tr√™n ECS)</a></li>
        <li><a href="#34-kh·ªüi-t·∫°o-database-chi-ti·∫øt">3.4 Kh·ªüi t·∫°o Database (Chi ti·∫øt)</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-4-c·∫≠p-nh·∫≠t-code--build-image">GIAI ƒêO·∫†N 4: C·∫¨P NH·∫¨T CODE &amp; BUILD IMAGE</a>
      <ul>
        <li><a href="#41-c·∫•u-h√¨nh-api-gateway-quan-tr·ªçng">4.1 C·∫•u h√¨nh API Gateway (Quan tr·ªçng)</a></li>
        <li><a href="#42-build--push-6-images-l√™n-ecr">4.2 Build &amp; Push 6 Images l√™n ECR</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https">GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS</a></li>
    <li><a href="#giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https-1">GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS</a>
      <ul>
        <li><a href="#2-t·∫°o-application-load-balancer-alb">2. T·∫°o Application Load Balancer (ALB)</a></li>
        <li><a href="#3-c·∫•u-h√¨nh-routing-rules-quy-tr√¨nh-chu·∫©n-2-b∆∞·ªõc">3. C·∫•u h√¨nh Routing Rules (Quy tr√¨nh chu·∫©n 2 b∆∞·ªõc)</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#1-chu·∫©n-b·ªã">1. Chu·∫©n b·ªã</a></li>
        <li><a href="#2-t·∫°o-task">2. T·∫°o Task</a></li>
        <li><a href="#3-chchi-ti·∫øt-c·∫•u-h√¨nh-t·ª´ng-service">3. ChChi ti·∫øt c·∫•u h√¨nh t·ª´ng Service</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-7-deploy-services">GIAI ƒêO·∫†N 7: DEPLOY SERVICES</a>
      <ul>
        <li><a href="#nh√≥m-1-c√°c-service-nghi·ªáp-v·ª•-auth-user-taskflow-notification">NH√ìM 1: C√ÅC SERVICE NGHI·ªÜP V·ª§ (Auth, User, Taskflow, Notification)</a></li>
        <li><a href="#nh√≥m-2-ai-model-service-n·ªôi-b·ªô">NH√ìM 2: AI MODEL SERVICE (N·ªôi b·ªô)</a></li>
        <li><a href="#nh√≥m-3-api-gateway-c·ªïng-ch√≠nh">NH√ìM 3: API GATEWAY (C·ªïng ch√≠nh)</a></li>
        <li><a href="#-c√°ch-ki·ªÉm-tra--x·ª≠-l√Ω-s·ª±-c·ªë">üîç C√ÅCH KI·ªÇM TRA &amp; X·ª¨ L√ù S·ª∞ C·ªê</a></li>
      </ul>
    </li>
    <li><a href="#giai-ƒëo·∫°n-8-ho√†n-t·∫•t">GIAI ƒêO·∫†N 8: HO√ÄN T·∫§T</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/vi/index.html"><span itemprop="name">B√°o C√°o Th·ª±c T·∫≠p</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/vi/5-workshop/index.html"><span itemprop="name">Workshop</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/index.html"><span itemprop="name">Deploy Flow</span></a><meta itemprop="position" content="3">&nbsp;>&nbsp;</li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><a href="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/5.3.1.7-deploy-and-test/index.html" title="Deploy and Test (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><a href="/AWS-Workshop/vi/5-workshop/5.4-clean_up/index.html" title="Clean Up (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">







<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="N·ªôi dung kh√°c"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable 5-workshop" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id=""></h1>

<h1 id="h∆∞·ªõng-d·∫´n-deploy-backend-microservices-tr√™n-aws-ecs-final-version">
  H∆Ø·ªöNG D·∫™N DEPLOY BACKEND MICROSERVICES TR√äN AWS ECS (FINAL VERSION)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h1><h2 id="-t·ªïng-quan-h·ªá-th·ªëng">
  üèó T·ªîNG QUAN H·ªÜ TH·ªêNG







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ul>
<li>
<p><strong>Region:</strong> Singapore (<code>ap-southeast-1</code>).</p>
</li>
<li>
<p><strong>Frontend Domain:</strong> <code>https://sgutodolist.com</code>.</p>
</li>
<li>
<p><strong>Backend Domain:</strong> <code>https://api.sgutodolist.com</code>.</p>
</li>
<li>
<p><strong>Ki·∫øn tr√∫c M·∫°ng (Ti·∫øt ki·ªám chi ph√≠ - Kh√¥ng d√πng NAT Gateway):</strong></p>
<ul>
<li>
<p><strong>Public Subnets:</strong> Ch·ª©a t·∫•t c·∫£ ECS Tasks (App, Kafka, AI) + ALB + Bastion. (B·∫Øt bu·ªôc ƒë·ªÉ Task c√≥ th·ªÉ t·∫£i Image t·ª´ Internet).</p>
</li>
<li>
<p><strong>Private Subnets:</strong> Ch·ª©a RDS + Redis (ƒê·ªÉ b·∫£o m·∫≠t d·ªØ li·ªáu).</p>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-1-chu·∫©n-b·ªã-network--security">
  GIAI ƒêO·∫†N 1: CHU·∫®N B·ªä NETWORK &amp; SECURITY







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="11-t·∫°o-vpc--subnets">
  1.1 T·∫°o VPC &amp; Subnets







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ol>
<li>
<p>V√†o <strong>VPC Console</strong> &gt; <strong>Create VPC</strong>.</p>
</li>
<li>
<p>Ch·ªçn <strong>VPC and more</strong>.</p>
<ul>
<li>
<p><strong>Name tag auto-generation:</strong> Nh·∫≠p <code>SGU-Microservices</code>.</p>
</li>
<li>
<p><strong>IPv4 CIDR block:</strong> <code>10.0.0.0/16</code>.</p>
</li>
<li>
<p><strong>Number of Availability Zones (AZs):</strong> Ch·ªçn <strong>2</strong> (<code>ap-southeast-1a</code> v√† <code>ap-southeast-1b</code>).</p>
</li>
<li>
<p><strong>Number of public subnets:</strong> Ch·ªçn <strong>2</strong>.</p>
</li>
<li>
<p><strong>Number of private subnets:</strong> Ch·ªçn <strong>2</strong>.</p>
</li>
<li>
<p><strong>NAT gateways:</strong> Ch·ªçn <strong>None</strong> (‚ö†Ô∏è Quan tr·ªçng ƒë·ªÉ ti·∫øt ki·ªám ~$30/th√°ng).</p>
</li>
<li>
<p><strong>VPC endpoints:</strong> Ch·ªçn <strong>None</strong>.</p>
</li>
<li>
<p><strong>DNS options:</strong> T√≠ch ch·ªçn c·∫£ <strong>Enable DNS hostnames</strong> v√† <strong>Enable DNS resolution</strong>.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Create VPC</strong>.</p>
</li>
</ol>
<h3 id="12-t·∫°o-security-groups-t∆∞·ªùng-l·ª≠a">
  1.2 T·∫°o Security Groups (T∆∞·ªùng l·ª≠a)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>V√†o <strong>VPC</strong> &gt; <strong>Security Groups</strong> &gt; <strong>Create security group</strong>. T·∫°o l·∫ßn l∆∞·ª£t 4 nh√≥m:</p>
<p><strong>1. <code>public-alb-sg</code></strong> (Cho Load Balancer):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST ALB</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules:</strong></p>
<ul>
<li>
<p>Type: <code>HTTPS</code> (443) | Source: <code>0.0.0.0/0</code>.</p>
</li>
<li>
<p>Type: <code>HTTP</code> (80) | Source: <code>0.0.0.0/0</code>.</p>
</li>
</ul>
</li>
</ul>
<p><strong>2. <code>ecs-app-sg</code></strong> (Cho c√°c Service Container):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST Service Container</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules (B∆∞·ªõc 1):</strong></p>
<ul>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>8080</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>8081</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>8082</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>9998</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>9999</code> | Source: Ch·ªçn <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> | Port: <code>9997</code> | Source: Ch·ªçn <code>public-alb-sg</code> (Cho AI Service).</p>
</li>
</ul>
</li>
<li>
<p><em>Nh·∫•n <strong>Create security group</strong> tr∆∞·ªõc.</em></p>
</li>
<li>
<p><strong>Inbound rules (B∆∞·ªõc 2 - Self referencing):</strong></p>
<ul>
<li>
<p>Ch·ªçn l·∫°i <code>ecs-app-sg</code> &gt; Edit inbound rules &gt; Add rule.</p>
</li>
<li>
<p>Type: <code>All TCP</code> | Port: <code>0-65535</code> | Source: T√¨m v√† ch·ªçn ch√≠nh <code>ecs-app-sg</code>.</p>
</li>
</ul>
</li>
</ul>
<p><strong>3. <code>private-db-sg</code></strong> (Cho RDS &amp; Redis &amp; Kafka):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST RDS &amp; Redis &amp; Kafka</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules:</strong></p>
<ul>
<li>
<p>Type: <code>MySQL</code> (3306) | Source: Ch·ªçn <code>ecs-app-sg</code>.</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> (Port <code>6379</code>) | Source: Ch·ªçn <code>ecs-app-sg</code> (Redis).</p>
</li>
<li>
<p>Type: <code>Custom TCP</code> (Port <code>9092</code>) | Source: Ch·ªçn <code>ecs-app-sg</code> (Kafka).</p>
</li>
</ul>
</li>
</ul>
<p><strong>4. <code>bastion-sg</code></strong> (Cho m√°y nh·∫£y):</p>
<ul>
<li>
<p>Description: <code>Security group for SGUTODOLIST bastion</code>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Inbound rules:</strong></p>
<ul>
<li>Type: <code>SSH</code> (22) | Source: <code>My IP</code> (IP m√°y c·ªßa b·∫°n).</li>
</ul>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-2-thi·∫øt-l·∫≠p-t√™n-mi·ªÅn--ssl">
  GIAI ƒêO·∫†N 2: THI·∫æT L·∫¨P T√äN MI·ªÄN &amp; SSL







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li>
<p>ƒê·ªïi Region sang <strong>Singapore (ap-southeast-1)</strong>.</p>
</li>
<li>
<p>V√†o <strong>Certificate Manager (ACM)</strong>.</p>
</li>
<li>
<p><strong>Request a certificate</strong> &gt; <strong>Request a public certificate</strong>.</p>
</li>
<li>
<p>Domain names: <code>api.sgutodolist.com</code>.</p>
</li>
<li>
<p>Validation method: <strong>DNS validation</strong>.</p>
</li>
<li>
<p>Click <strong>Request</strong>.</p>
</li>
<li>
<p>Click v√†o Certificate ID &gt; Ph·∫ßn <strong>Domains</strong> &gt; <strong>Create records in Route 53</strong>.</p>
</li>
<li>
<p>ƒê·ª£i tr·∫°ng th√°i chuy·ªÉn sang <strong>Issued</strong> (M√†u xanh).</p>
</li>
</ol>
<hr>
<h2 id="giai-ƒëo·∫°n-3-c·∫•u-h√¨nh-infrastructure">
  GIAI ƒêO·∫†N 3: C·∫§U H√åNH INFRASTRUCTURE







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="31-rds-mysql">
  3.1 RDS MySQL







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ol>
<li>
<p>V√†o <strong>RDS</strong> &gt; <strong>Create database</strong> &gt; <strong>Standard create</strong> &gt; <strong>MySQL</strong>.</p>
</li>
<li>
<p>Template: <strong>Free tier</strong>.</p>
</li>
<li>
<p>Identifier: <code>sgu-todolist-db</code>.</p>
</li>
<li>
<p>Username: <code>root</code> / Password: <code>12345678</code> (V√≠ d·ª•).</p>
</li>
<li>
<p><strong>Connectivity:</strong></p>
<ul>
<li>
<p>Compute resource: <strong>Don&rsquo;t connect to an EC2&hellip;</strong>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Public access: <strong>No</strong>.</p>
</li>
<li>
<p>VPC security group: Ch·ªçn <code>private-db-sg</code> (b·ªè default).</p>
</li>
<li>
<p>Availability Zone: <strong><code>ap-southeast-1a</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Create database</strong>.</p>
</li>
<li>
<p><em>Sau khi t·∫°o xong, copy <strong>Endpoint</strong> c·ªßa database.</em></p>
</li>
</ol>
<h3 id="32-elasticache-redis-c·∫•u-h√¨nh-chi-ti·∫øt">
  3.2 ElastiCache Redis (C·∫•u h√¨nh chi ti·∫øt)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><ol>
<li>V√†o <strong>Redis OSS caches</strong> &gt; <strong>Create Redis OSS cache</strong>.</li>
</ol>
<h4 id="step-1-settings">
  Step 1: SETTINGS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Cluster settings:</strong></p>
<ul>
<li>
<p>Engine: <strong>Redis OSS</strong>.</p>
</li>
<li>
<p>Deployment option: <strong>Node-based cluster</strong>.</p>
</li>
<li>
<p>Creation method: <strong>Cluster cache</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Cluster info:</strong></p>
<ul>
<li>
<p>Cluster mode: <strong>Disabled</strong>.</p>
</li>
<li>
<p>Name: <code>sgu-redis</code>.</p>
</li>
<li>
<p>Multi-AZ: <strong>Uncheck (Disable)</strong>.</p>
</li>
<li>
<p>Auto-failover: <strong>Uncheck (Disable)</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Cache settings:</strong></p>
<ul>
<li>
<p>Node type: <strong><code>cache.t3.micro</code></strong>.</p>
</li>
<li>
<p>Number of replicas: <strong>0</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Connectivity:</strong></p>
<ul>
<li>
<p>Subnet groups: <strong>Create a new subnet group</strong>.</p>
<ul>
<li>
<p>Name: <code>sgu-redis-subnet-group</code>.</p>
</li>
<li>
<p>VPC ID: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Selected subnets: Ch·ªçn 2 <strong>Private Subnets</strong>.</p>
</li>
</ul>
</li>
<li>
<p>Availability Zone placements: <strong>Specify Availability Zones</strong>.</p>
<ul>
<li>Primary: <strong><code>ap-southeast-1a</code></strong>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="step-2-advanced-settings">
  Step 2: ADVANCED SETTINGS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Security:</strong></p>
<ul>
<li>Selected security groups: Ch·ªçn <strong><code>private-db-sg</code></strong> (B·ªè default).</li>
</ul>
</li>
<li>
<p><strong>Backup:</strong> Enable automatic backups: <strong>Uncheck (Disable)</strong>.</p>
</li>
<li>
<p><strong>Logs:</strong> Disable h·∫øt.</p>
</li>
</ul>
<p><em>(Nh·∫•n Create. Sau khi xong, copy <strong>Primary Endpoint</strong>).</em></p>
<h3 id="33-kafka-docker-tr√™n-ecs">
  3.3 Kafka (Docker tr√™n ECS)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><strong>B∆∞·ªõc 1: T·∫°o Namespace</strong></p>
<ol>
<li>
<p>V√†o <strong>Cloud Map</strong> &gt; <strong>Create namespace</strong>.</p>
</li>
<li>
<p>Name: <code>sgu.local</code>.</p>
</li>
<li>
<p>Instance discovery: <strong>API calls and DNS queries in VPCs</strong>.</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Create.</p>
</li>
</ol>
<p><strong>B∆∞·ªõc 2: T·∫°o Task Definition cho Kafka</strong></p>
<ol>
<li>
<p>V√†o <strong>Amazon ECS</strong> &gt; <strong>Task definitions</strong>.</p>
</li>
<li>
<p>Ch·ªçn <code>kafka-server-td</code> (n·∫øu ƒë√£ c√≥) &gt; <strong>Create new revision</strong> (ho·∫∑c Create new n·∫øu ch∆∞a c√≥).</p>
</li>
<li>
<p><strong>Infrastructure:</strong></p>
<ul>
<li>
<p>Launch type: <strong>AWS Fargate</strong>.</p>
</li>
<li>
<p>CPU: <code>.5 vCPU</code>.</p>
</li>
<li>
<p>Memory: <code>1 GB</code> (Kafka c·∫ßn √≠t nh·∫•t 1GB ƒë·ªÉ kh·ªüi ƒë·ªông Java Heap).</p>
</li>
<li>
<p>Task Execution Role: <code>ecsTaskExecutionRole</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Container - 1:</strong></p>
<ul>
<li>
<p><strong>Name:</strong> <code>kafka-server</code></p>
</li>
<li>
<p><strong>Image URI:</strong> <code>bitnami/kafka:latest</code></p>
</li>
<li>
<p><strong>Container Port:</strong> <code>9092</code></p>
</li>
<li>
<p><strong>Protocol:</strong> <code>TCP</code></p>
</li>
</ul>
</li>
<li>
<p><strong>Environment Variables (Quan tr·ªçng - H√£y x√≥a c≈© v√† nh·∫≠p l·∫°i y h·ªát b·∫£ng n√†y):</strong></p>
</li>
</ol>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
          <th><strong>Gi·∫£i th√≠ch (Kh√¥ng c·∫ßn nh·∫≠p)</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>KAFKA_CFG_NODE_ID</code></td>
          <td><code>0</code></td>
          <td>ƒê·ªãnh danh node</td>
      </tr>
      <tr>
          <td><code>KAFKA_CFG_PROCESS_ROLES</code></td>
          <td><code>controller,broker</code></td>
          <td>V·ª´a qu·∫£n l√Ω v·ª´a ch·ª©a d·ªØ li·ªáu</td>
      </tr>
      <tr>
          <td><code>KAFKA_CFG_LISTENERS</code></td>
          <td><code>PLAINTEXT://:9092,CONTROLLER://:9093</code></td>
          <td>L·∫Øng nghe n·ªôi b·ªô</td>
      </tr>
      <tr>
          <td><code>KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP</code></td>
          <td><code>CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT</code></td>
          <td>Protocol map</td>
      </tr>
      <tr>
          <td><code>KAFKA_CFG_CONTROLLER_QUORUM_VOTERS</code></td>
          <td><code>0@127.0.0.1:9093</code></td>
          <td>T·ª± tr·ªè v·ªÅ ch√≠nh n√≥ (localhost)</td>
      </tr>
      <tr>
          <td><code>KAFKA_CFG_ADVERTISED_LISTENERS</code></td>
          <td><code>PLAINTEXT://kafka.sgu.local:9092</code></td>
          <td><strong>ƒê·ªãa ch·ªâ ƒë·ªÉ Service kh√°c g·ªçi v√†o</strong></td>
      </tr>
      <tr>
          <td><code>KAFKA_CFG_LOG_DIRS</code></td>
          <td><code>/tmp/kafka-logs</code></td>
          <td><strong>FIX L·ªñI CRASH:</strong> Ghi log v√†o th∆∞ m·ª•c t·∫°m</td>
      </tr>
      <tr>
          <td><code>ALLOW_PLAINTEXT_LISTENER</code></td>
          <td><code>yes</code></td>
          <td>Cho ph√©p k·∫øt n·ªëi kh√¥ng c·∫ßn SSL</td>
      </tr>
  </tbody>
</table>
<ol start="6">
<li>
<p><strong>Logging:</strong> &gt; <strong>Use log collection</strong> (ƒê·ªÉ xem l·ªói n·∫øu c√≥).</p>
</li>
<li>
<p>Nh·∫•n <strong>Create</strong>.</p>
</li>
</ol>
<p><strong>B∆∞·ªõc 3: Deploy Kafka Service</strong></p>
<p>Sau khi c√≥ Task Definition m·ªõi, ta ti·∫øn h√†nh t·∫°o Service.</p>
<ol>
<li>
<p>V√†o Cluster &gt; Tab <strong>Services</strong> &gt; <strong>Create</strong>.</p>
</li>
<li>
<p><strong>Service details:</strong></p>
<ul>
<li>
<p><strong>Task definition family:</strong> Ch·ªçn <code>kafka-server-td</code> (Ch·ªçn Revision m·ªõi nh·∫•t v·ª´a t·∫°o ·ªü B∆∞·ªõc 1).</p>
</li>
<li>
<p><strong>Service name:</strong> Nh·∫≠p <code>kafka-server</code>.</p>
</li>
<li>
<p><strong>Desired tasks:</strong> <code>1</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Networking (B·∫Øt bu·ªôc):</strong></p>
<ul>
<li>
<p><strong>VPC:</strong> <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Subnets:</strong> Ch·ªçn <strong>2 PUBLIC SUBNETS</strong>. (C·∫ßn Internet ƒë·ªÉ t·∫£i Image Kafka v·ªÅ).</p>
</li>
<li>
<p><strong>Security group:</strong> Ch·ªçn <code>private-db-sg</code>.</p>
</li>
<li>
<p><strong>Public IP:</strong> <strong>Turned on</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Load Balancing:</strong></p>
<ul>
<li><strong>KH√îNG CH·ªåN (Uncheck)</strong>. Kafka ch·ªâ d√πng n·ªôi b·ªô, kh√¥ng c·∫ßn Load Balancer.</li>
</ul>
</li>
<li>
<p><strong>Service Discovery (R·∫•t quan tr·ªçng):</strong></p>
<ul>
<li>
<p>T√≠ch ch·ªçn ‚úÖ <strong>Use service discovery</strong>.</p>
</li>
<li>
<p><strong>Namespace:</strong> Ch·ªçn <code>sgu.local</code>.</p>
</li>
<li>
<p><strong>Service discovery name:</strong> Nh·∫≠p ch√≠nh x√°c ch·ªØ: <strong><code>kafka</code></strong>.</p>
</li>
<li>
<p><em>(H·ªá th·ªëng s·∫Ω t·∫°o DNS: <code>kafka.sgu.local</code>. C√°c service Auth/User/Taskflow s·∫Ω k·∫øt n·ªëi qua ƒë·ªãa ch·ªâ n√†y).</em></p>
</li>
</ul>
</li>
<li>
<p>Nh·∫•n <strong>Create</strong>.</p>
</li>
</ol>
<h3 id="34-kh·ªüi-t·∫°o-database-chi-ti·∫øt">
  3.4 Kh·ªüi t·∫°o Database (Chi ti·∫øt)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><strong>1. Update Security Group:</strong></p>
<ul>
<li>V√†o <code>private-db-sg</code> &gt; Inbound Rules &gt; Add: <code>MySQL (3306)</code> | Source: <code>bastion-sg</code>.</li>
</ul>
<p><strong>2. T·∫°o Bastion Host (EC2):</strong></p>
<ul>
<li>
<p>Launch Instance &gt; Name <code>sgu-bastion</code> &gt; AMI <strong>Amazon Linux 2023</strong> &gt; Type <code>t3.micro</code>.</p>
</li>
<li>
<p>Key pair: T·∫°o m·ªõi <code>sgutodolist-key</code> (t·∫£i v·ªÅ m√°y).</p>
</li>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Subnet: <strong>Public Subnet 1</strong>.</p>
</li>
<li>
<p>Auto-assign public IP: <strong>Enable</strong> (B·∫Øt bu·ªôc).</p>
</li>
<li>
<p>Security groups: Ch·ªçn <code>bastion-sg</code>.</p>
</li>
</ul>
<p><strong>3. Init Database (Ch·∫°y l·ªánh t·ª´ m√°y Local):</strong></p>
<ul>
<li>
<p>M·ªü Terminal VS Code t·∫°i th∆∞ m·ª•c ch·ª©a <code>sgu-key.pem</code>.</p>
</li>
<li>
<p><strong>B∆∞·ªõc 1: SSH v√†o Bastion</strong></p>
<p>PowerShell</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code># V·ªõi Windows
icacls &#34;sgutodolist-key.pem&#34; /inheritance:r
icacls &#34;sgutodolist-key.pem&#34; /grant:r &#34;$($env:USERNAME):(R)&#34;
ssh -i &#34;sgu-key.pem&#34; ec2-user@&lt;PUBLIC-IP-BASTION&gt; (Public IPv4 address c·ªßa m√°y ch·ªß EC2 sgu-bastion)


# V·ªõi Mac/Linux
chmod 400 sgu-key.pem
ssh -i sgu-key.pem ec2-user@&lt;PUBLIC-IP-BASTION&gt;</code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 2: C√†i MySQL Client (tr√™n Bastion)</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo dnf install mariadb105 -y</span></span></code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 3: K·∫øt n·ªëi RDS</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>mysql -h sgu-todolist-db.cnsww4so4xfb.ap-southeast-1.rds.amazonaws.com -u root -p
sgu-todolist-db.cnsww4so4xfb.ap-southeast-1.rds.amazonaws.com
# Nh·∫≠p password: 12345678</code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 4: T·∫°o Database (SQL)</strong></p>
<p>SQL</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>CREATE DATABASE aws_todolist_database CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
SHOW DATABASES;
EXIT;</code></pre></div>
</li>
<li>
<p><strong>B∆∞·ªõc 5:</strong> G√µ <code>exit</code> ƒë·ªÉ tho√°t kh·ªèi Bastion.</p>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-4-c·∫≠p-nh·∫≠t-code--build-image">
  GIAI ƒêO·∫†N 4: C·∫¨P NH·∫¨T CODE &amp; BUILD IMAGE







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><h3 id="41-c·∫•u-h√¨nh-api-gateway-quan-tr·ªçng">
  4.1 C·∫•u h√¨nh API Gateway (Quan tr·ªçng)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Ta c·∫ßn l√†m 2 vi·ªác t·∫°i source code c·ªßa <strong>API Gateway</strong>:</p>
<p><strong>B∆∞·ªõc 1: T·∫°o file c·∫•u h√¨nh CORS (Java)</strong> File n√†y gi√∫p x·ª≠ l√Ω CORS to√†n c·ª•c m·ªôt c√°ch ch√≠nh x√°c tr√™n m√¥i tr∆∞·ªùng Reactive.</p>
<ul>
<li>
<p><strong>File:</strong> <code>src/main/java/aws/todolist/api_gateway/config/CorsConfig.java</code></p>
</li>
<li>
<p><strong>N·ªôi dung:</strong></p>
</li>
</ul>
<p>Java</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>package aws.todolist.api_gateway.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.reactive.CorsWebFilter;
import org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;
import java.util.Arrays;

@Configuration
public class CorsConfig {

    @Bean
    public CorsWebFilter corsWebFilter() {
        CorsConfiguration corsConfig = new CorsConfiguration();

        // 1. Cho ph√©p c√°c Domain n√†y g·ªçi API
        corsConfig.setAllowedOrigins(Arrays.asList(
            &#34;https://sgutodolist.com&#34;,
            &#34;https://www.sgutodolist.com&#34;,
            &#34;http://localhost:3000&#34;, // Frontend Dev
            &#34;http://localhost:4200&#34;, // Frontend Dev (Backup)
            &#34;http://localhost:5500&#34;
        ));

        // 2. C·∫•u h√¨nh method v√† header
        corsConfig.setMaxAge(3600L);
        corsConfig.addAllowedMethod(&#34;*&#34;); // GET, POST, PUT, DELETE...
        corsConfig.addAllowedHeader(&#34;*&#34;);
        corsConfig.setAllowCredentials(true);

        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration(&#34;/**&#34;, corsConfig);

        return new CorsWebFilter(source);
    }
}</code></pre></div>
<p>*<em>B∆∞·ªõc 2: C·∫≠p nh·∫≠t <code>application.yml</code> (Chu·∫©n h√≥a bi·∫øn m√¥i tr∆∞·ªùng)</em></p>
<ul>
<li><strong>File:</strong> <code>src/main/resources/application.yml</code></li>
</ul>
<p>YAML</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>server:
  port: 8080

jwt:
  secret: 843567893696976453275974432697R634976R738467TR678T34865R6834R8763T478378637664538745673865783678548735687R3

spring:
  application:
    name: api-gateway

  cloud:
    gateway:
      # ‚ö†Ô∏è ƒê√£ t·∫Øt Global CORS ·ªü ƒë√¢y ƒë·ªÉ d√πng file Java CorsConfig.java (tr√°nh xung ƒë·ªôt)
      # globalcors: ... (ƒê√£ comment)

      # üîπ Routes Configuration (S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng t·ª´ ECS Task Def)
      routes:
        - id: ai-model-service
          uri: ${AI_MODEL_SERVICE:http://localhost:9997}
          predicates:
            - Path=/api/model/**

        - id: user-service
          uri: ${USER_SERVICE_URL:http://localhost:8081}
          predicates:
            - Path=/api/user/**

        - id: taskflow-service
          uri: ${TASKFLOW_SERVICE_URL:http://localhost:8082}
          predicates:
            - Path=/api/taskflow/**

        - id: auth-service
          uri: ${AUTH_SERVICE_URL:http://localhost:9999}
          predicates:
            - Path=/api/auth/**

        # üîπ Notification Routes
        - id: notification-ws
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:9998}
          predicates:
            - Path=/api/notification/ws/**

        - id: notification-rest
          uri: ${NOTIFICATION_SERVICE_URL:http://localhost:9998}
          predicates:
            - Path=/api/notification/**

  # üß± Redis Configuration (S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng)
  data:
    redis:
      host: ${SPRING_DATA_REDIS_HOST:redis}
      port: ${SPRING_DATA_REDIS_PORT:6379}
      timeout: 6000
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms

# =========================
# ‚öôÔ∏è Management &amp; Monitoring
# =========================
management:
  endpoints:
    web:
      exposure:
        include: &#34;*&#34;
  endpoint:
    health:
      show-details: always

# =========================
# üß≠ SpringDoc Swagger UI
# =========================
springdoc:
  api-docs:
    enabled: true
  swagger-ui:
    urls:
      # S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng ƒë·ªÉ Swagger ho·∫°t ƒë·ªông ƒë√∫ng tr√™n Domain th·∫≠t
      - name: user-service
        url: ${USER_SERVICE_URL:http://localhost:8081}/api/user/v3/api-docs
      - name: taskflow-service
        url: ${TASKFLOW_SERVICE_URL:http://localhost:8082}/api/taskflow/v3/api-docs
      - name: auth-service
        url: ${AUTH_SERVICE_URL:http://localhost:9999}/api/auth/v3/api-docs
      - name: notification-service
        url: ${NOTIFICATION_SERVICE_URL:http://localhost:9998}/api/notification/v3/api-docs</code></pre></div>
<hr>
<h3 id="42-build--push-6-images-l√™n-ecr">
  4.2 Build &amp; Push 6 Images l√™n ECR







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>M·ªü Terminal t·∫°i th∆∞ m·ª•c g·ªëc c·ªßa d·ª± √°n (<code>todolist-backend</code>), ch·∫°y l·∫ßn l∆∞·ª£t c√°c l·ªánh sau:</p>
<p><strong>1. ƒêƒÉng nh·∫≠p ECR:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>aws ecr get-login-password --region ap-southeast-1 | docker login --username AWS --password-stdin 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com</code></pre></div>
<p><strong>2. Build &amp; Push l·∫ßn l∆∞·ª£t 6 Services:</strong></p>
<ul>
<li>
<p><strong>API Gateway:</strong></p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd api-gateway
</span></span><span style="display:flex;"><span>docker build -t api-gateway:latest .
</span></span><span style="display:flex;"><span>docker tag api-gateway:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/api-gateway:latest
</span></span><span style="display:flex;"><span>docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/api-gateway:latest
</span></span><span style="display:flex;"><span>cd ..</span></span></code></pre></div>
</li>
<li>
<p><strong>Auth Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd auth-service
docker build -t auth-service:latest .
docker tag auth-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/auth-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/auth-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>User Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd user-service
docker build -t user-service:latest .
docker tag user-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/user-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/user-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>Taskflow Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd taskflow-service
docker build -t taskflow-service:latest .
docker tag taskflow-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/taskflow-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/taskflow-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>Notification Service:</strong></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd notification-service
docker build -t notification-service:latest .
docker tag notification-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/notification-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/notification-service:latest
cd ..</code></pre></div>
</li>
<li>
<p><strong>AI Model Service:</strong> <em>L∆∞u √Ω: Th∆∞ m·ª•c ch·ª©a code AI c·ªßa b·∫°n t√™n l√† <code>model</code> trong docker-compose</em></p>
<p>Bash</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0"><code>cd model
docker build -t ai-model-service:latest .
docker tag ai-model-service:latest 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/ai-model-service:latest
docker push 031133710884.dkr.ecr.ap-southeast-1.amazonaws.com/ai-model-service:latest
cd ..</code></pre></div>
</li>
</ul>
<hr>
<h2 id="giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https">
  GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li>
<p><strong>Target Groups:</strong> T·∫°o 5 c√°i (<code>IP addresses</code>, <code>HTTP</code>).</p>
<ul>
<li>
<p><code>api-gateway-tg</code>: 8080</p>
</li>
<li>
<p><code>auth-tg</code>: 9999</p>
</li>
<li>
<p><code>user-tg</code>: 8081</p>
</li>
<li>
<p><code>task-tg</code>: 8082</p>
</li>
<li>
<p><code>noti-tg</code>: 9998</p>
</li>
<li>
<p><em>(Kh√¥ng c·∫ßn t·∫°o TG cho AI Model v√¨ Gateway g·ªçi n·ªôi b·ªô).</em></p>
</li>
</ul>
</li>
<li>
<p><strong>Load Balancer:</strong></p>
<ul>
<li>
<p>T·∫°o ALB <code>sgu-alb</code>. Scheme: <strong>Internet-facing</strong>.</p>
</li>
<li>
<p>Subnets: <strong>2 Public Subnets</strong>. Security Group: <code>public-alb-sg</code>.</p>
</li>
<li>
<p>Listener <strong>HTTPS:443</strong>: Forward to <code>tg-api-gateway</code>. Certificate <code>api.sgutodolist.com</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Rules (HTTPS Listener):</strong></p>
<ul>
<li>
<p>Path <code>/api/auth/*</code> -&gt; <code>tg-auth</code>.</p>
</li>
<li>
<p>Path <code>/api/users/*</code> -&gt; <code>tg-user</code>.</p>
</li>
<li>
<p>Path <code>/api/tasks/*</code> -&gt; <code>tg-task</code>.</p>
</li>
<li>
<p>Path <code>/api/notifications/*</code> -&gt; <code>tg-noti</code>.</p>
</li>
<li>
<p>Default -&gt; <code>tg-api-gateway</code>.</p>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="giai-ƒëo·∫°n-5-c·∫•u-h√¨nh-alb--https-1">
  GIAI ƒêO·∫†N 5: C·∫§U H√åNH ALB &amp; HTTPS







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li><strong>Target Groups:</strong> T·∫°o 5 c√°i (<code>IP addresses</code>, <code>HTTP</code>).</li>
</ol>
<p><strong>T·∫°o 5 Target Groups</strong></p>
<p>Ta c·∫ßn l·∫∑p l·∫°i quy tr√¨nh d∆∞·ªõi ƒë√¢y <strong>5 l·∫ßn</strong> cho 5 service, ch·ªâ thay ƒë·ªïi <strong>Name</strong> v√† <strong>Port</strong>.</p>
<p><strong>Quy tr√¨nh chu·∫©n cho m·ªói Target Group:</strong></p>
<p><strong>Step 1: Create target group</strong></p>
<ul>
<li>
<p><strong>Target type:</strong> Ch·ªçn <strong>IP addresses</strong> (B·∫Øt bu·ªôc cho Fargate).</p>
</li>
<li>
<p><strong>Target group name:</strong> Nh·∫≠p t√™n t∆∞∆°ng ·ª©ng (v√≠ d·ª•: <code>api-gateway-tg</code>).</p>
</li>
<li>
<p><strong>Protocol:</strong> Ch·ªçn <strong>HTTP</strong>.</p>
</li>
<li>
<p><strong>Port:</strong> Nh·∫≠p port t∆∞∆°ng ·ª©ng (v√≠ d·ª•: <code>8080</code>).</p>
</li>
<li>
<p><strong>IP address type:</strong> <strong>IPv4</strong>.</p>
</li>
<li>
<p><strong>VPC:</strong> Ch·ªçn <code>SGU-Microservices-vpc</code>.</p>
</li>
<li>
<p><strong>Protocol version:</strong> <strong>HTTP1</strong>.</p>
</li>
<li>
<p><strong>Health checks:</strong></p>
<ul>
<li>
<p><strong>Health check protocol:</strong> <strong>HTTP</strong>.</p>
</li>
<li>
<p><strong>Health check path:</strong> Nh·∫≠p <code>/actuator/health</code> (Thay cho d·∫•u <code>/</code> m·∫∑c ƒë·ªãnh).</p>
</li>
</ul>
</li>
<li>
<p><em>C√°c ph·∫ßn kh√°c (Advanced health check settings, Tags&hellip;):</em> Gi·ªØ nguy√™n.</p>
</li>
<li>
<p>Nh·∫•n <strong>Next</strong>.</p>
</li>
</ul>
<p><strong>Step 2: Register targets</strong></p>
<ul>
<li>
<p>‚ö†Ô∏è <strong>QUAN TR·ªåNG:</strong> T·∫°i m√†n h√¨nh n√†y, ta <strong>KH√îNG L√ÄM G√å C·∫¢</strong>.</p>
</li>
<li>
<p>Kh√¥ng nh·∫≠p IP, kh√¥ng nh·∫•n &ldquo;Include as pending&rdquo;.</p>
</li>
<li>
<p><em>L√Ω do:</em> Khi ta Deploy ECS Service ·ªü Giai ƒëo·∫°n 7, ECS s·∫Ω t·ª± ƒë·ªông th√™m IP c·ªßa container v√†o ƒë√¢y.</p>
</li>
<li>
<p>Nh·∫•n n√∫t <strong>Next</strong>.</p>
</li>
</ul>
<p><strong>Step 3: Review and create</strong></p>
<ul>
<li>Nh·∫•n n√∫t <strong>Create target group</strong>.</li>
</ul>
<p><strong>Danh s√°ch th√¥ng s·ªë cho 5 Target Groups:</strong></p>
<p>B·∫°n h√£y t·∫°o l·∫ßn l∆∞·ª£t v·ªõi c√°c th√¥ng s·ªë sau (c√°c th√¥ng s·ªë kh√°c gi·ªëng h·ªát h∆∞·ªõng d·∫´n tr√™n):</p>
<table>
  <thead>
      <tr>
          <th><strong>S·ªë TT</strong></th>
          <th><strong>Target Group Name</strong></th>
          <th><strong>Port</strong></th>
          <th><strong>Health Check Path</strong></th>
          <th><strong>Ghi ch√∫</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td><strong><code>api-gateway-tg</code></strong></td>
          <td><strong>8080</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho API Gateway</td>
      </tr>
      <tr>
          <td>2</td>
          <td><strong><code>auth-tg</code></strong></td>
          <td><strong>9999</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho Auth Service</td>
      </tr>
      <tr>
          <td>3</td>
          <td><strong><code>user-tg</code></strong></td>
          <td><strong>8081</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho User Service</td>
      </tr>
      <tr>
          <td>4</td>
          <td><strong><code>task-tg</code></strong></td>
          <td><strong>8082</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho TaskFlow</td>
      </tr>
      <tr>
          <td>5</td>
          <td><strong><code>noti-tg</code></strong></td>
          <td><strong>9998</strong></td>
          <td><code>/actuator/health</code></td>
          <td>Cho Notification</td>
      </tr>
  </tbody>
</table>
<h3 id="2-t·∫°o-application-load-balancer-alb">
  2. T·∫°o Application Load Balancer (ALB)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>V√†o <strong>EC2 Console</strong> &gt; <strong>Load Balancers</strong> &gt; <strong>Create load balancer</strong>.</p>
<p><strong>Step 1: Basic configuration</strong></p>
<ul>
<li>
<p><strong>Load balancer type:</strong> Ch·ªçn <strong>Application Load Balancer</strong>.</p>
</li>
<li>
<p><strong>Load balancer name:</strong> <code>sgu-alb</code>.</p>
</li>
<li>
<p><strong>Scheme:</strong> Ch·ªçn <strong>Internet-facing</strong> (Quan tr·ªçng: ƒê·ªÉ user t·ª´ internet truy c·∫≠p ƒë∆∞·ª£c).</p>
</li>
<li>
<p><strong>IP address type:</strong> <strong>IPv4</strong>.</p>
</li>
</ul>
<p><strong>Step 2: Network mapping</strong></p>
<ul>
<li>
<p><strong>VPC:</strong> Ch·ªçn <code>SGU-Microservices-vpc</code>.</p>
</li>
<li>
<p><strong>Mappings (Availability Zones):</strong> B·∫°n ph·∫£i ch·ªçn 2 Zones v√† <strong>2 Public Subnets</strong>:</p>
<ul>
<li>
<p>T√≠ch ch·ªçn <strong>ap-southeast-1a</strong> -&gt; Ch·ªçn Subnet <strong>Public 1</strong> (V√≠ d·ª•: <code>...public1...</code>).</p>
</li>
<li>
<p>T√≠ch ch·ªçn <strong>ap-southeast-1b</strong> -&gt; Ch·ªçn Subnet <strong>Public 2</strong> (V√≠ d·ª•: <code>...public2...</code>).</p>
</li>
<li>
<p><em>L√Ω do:</em> ALB ph·∫£i n·∫±m ·ªü Public Subnet ƒë·ªÉ nh·∫≠n traffic t·ª´ Internet.</p>
</li>
</ul>
</li>
</ul>
<p><strong>Step 3: Security groups</strong></p>
<ul>
<li>
<p>B·ªè ch·ªçn <code>default</code>.</p>
</li>
<li>
<p>Ch·ªçn <strong><code>public-alb-sg</code></strong>.</p>
</li>
</ul>
<p><strong>Step 4: Listeners and routing (T·∫°o 2 Listener)</strong></p>
<ul>
<li>
<p><strong>Listener 1 (HTTP:80):</strong> (C√≥ s·∫µn m·∫∑c ƒë·ªãnh)</p>
<ul>
<li>
<p>Protocol: <code>HTTP</code> | Port: <code>80</code>.</p>
</li>
<li>
<p><strong>Default action:</strong> Ch·ªçn Forward to target group -&gt; <strong><code>api-gateway-tg</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Listener 2 (HTTPS:443):</strong> (B·∫°n b·∫•m n√∫t <strong>Add listener</strong> ƒë·ªÉ th√™m d√≤ng n√†y)</p>
<ul>
<li>
<p>Protocol: <code>HTTPS</code> | Port: <code>443</code>.</p>
</li>
<li>
<p><strong>Default action:</strong> Ch·ªçn Forward to target group -&gt; <strong><code>api-gateway-tg</code></strong>.</p>
</li>
<li>
<p><strong>Secure listener settings:</strong></p>
<ul>
<li>
<p><strong>Certificate source:</strong> ACM.</p>
</li>
<li>
<p><strong>Certificate:</strong> Ch·ªçn ch·ª©ng ch·ªâ <code>api.sgutodolist.com</code> (ƒë√£ t·∫°o ·ªü Giai ƒëo·∫°n 2).</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Step 5: Review &amp; Create</strong></p>
<ul>
<li>
<p>Nh·∫•n <strong>Create load balancer</strong>.</p>
</li>
<li>
<p><em>ƒê·ª£i kho·∫£ng 2-3 ph√∫t ƒë·ªÉ State chuy·ªÉn t·ª´ <code>Provisioning</code> sang <code>Active</code>.</em></p>
</li>
</ul>
<hr>
<h3 id="3-c·∫•u-h√¨nh-routing-rules-quy-tr√¨nh-chu·∫©n-2-b∆∞·ªõc">
  3. C·∫•u h√¨nh Routing Rules (Quy tr√¨nh chu·∫©n 2 b∆∞·ªõc)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Ch√∫ng ta s·∫Ω th√™m <strong>4 Rules</strong> m·ªõi. M·∫∑c ƒë·ªãnh ALB ƒë√£ c√≥ Rule cu·ªëi c√πng (Default) tr·ªè v·ªÅ <code>api-gateway-tg</code> r·ªìi, kh√¥ng c·∫ßn s·ª≠a.</p>
<p><strong>B·∫£ng th√¥ng s·ªë c·∫ßn nh·∫≠p:</strong></p>
<table>
  <thead>
      <tr>
          <th><strong>Priority (ƒê·ªô ∆∞u ti√™n)</strong></th>
          <th><strong>T√™n Rule (Name)</strong></th>
          <th><strong>Condition (Path)</strong></th>
          <th><strong>Action (Forward to)</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>1</strong></td>
          <td>Auth Rule</td>
          <td><code>/api/auth/*</code></td>
          <td><strong><code>auth-tg</code></strong></td>
      </tr>
      <tr>
          <td><strong>2</strong></td>
          <td>User Rule</td>
          <td><code>/api/user/*</code></td>
          <td><strong><code>user-tg</code></strong></td>
      </tr>
      <tr>
          <td><strong>3</strong></td>
          <td>Task Rule</td>
          <td><code>/api/taskflow/*</code></td>
          <td><strong><code>task-tg</code></strong></td>
      </tr>
      <tr>
          <td><strong>4</strong></td>
          <td>Noti Rule</td>
          <td><code>/api/notification/*</code></td>
          <td><strong><code>noti-tg</code></strong></td>
      </tr>
  </tbody>
</table>
<p>T·∫°i tab <strong>Listeners and rules</strong> c·ªßa ALB, nh·∫•n <strong>Add rule</strong>.</p>
<h4 id="step-1-define-rule-c·∫•u-h√¨nh-ƒëi·ªÅu-ki·ªán--h√†nh-ƒë·ªông">
  Step 1: Define rule (C·∫•u h√¨nh ƒëi·ªÅu ki·ªán &amp; h√†nh ƒë·ªông)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ol>
<li>
<p><strong>Name and tags:</strong></p>
<ul>
<li><strong>Name:</strong> Nh·∫≠p t√™n rule (V√≠ d·ª•: <code>Auth Rule</code>).</li>
</ul>
</li>
<li>
<p><strong>Conditions:</strong></p>
<ul>
<li>
<p>Nh·∫•n <strong>Add condition</strong>.</p>
</li>
<li>
<p>Ch·ªçn <strong>Path</strong>.</p>
</li>
<li>
<p><strong>Path condition value:</strong> Nh·∫≠p <code>/api/auth/*</code> (Ch√∫ √Ω d·∫•u <code>*</code> ·ªü cu·ªëi).</p>
</li>
<li>
<p>Nh·∫•n <strong>Confirm</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Actions:</strong></p>
<ul>
<li>
<p><strong>Routing action:</strong> Ch·ªçn <strong>Forward to target groups</strong>.</p>
</li>
<li>
<p><strong>Target group:</strong> Ch·ªçn <strong><code>auth-tg</code></strong>.</p>
</li>
<li>
<p><strong>Weight:</strong> <code>1</code> (M·∫∑c ƒë·ªãnh).</p>
</li>
</ul>
</li>
<li>
<p>K√©o xu·ªëng d∆∞·ªõi c√πng, nh·∫•n n√∫t <strong>Next</strong>.</p>
</li>
</ol>
<h4 id="step-2-set-rule-policy-c·∫•u-h√¨nh-ƒë·ªô-∆∞u-ti√™n">
  Step 2: Set rule policy (C·∫•u h√¨nh ƒë·ªô ∆∞u ti√™n)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><p>ƒê√¢y l√† m√†n h√¨nh b·∫°n ƒëang th·∫•y.</p>
<ol>
<li>
<p>T·∫°i √¥ <strong>Priority</strong> (b√™n c·∫°nh t√™n rule b·∫°n v·ª´a t·∫°o):</p>
<ul>
<li>Nh·∫≠p s·ªë <strong><code>1</code></strong> (V√¨ ƒë√¢y l√† Auth Rule).</li>
</ul>
</li>
<li>
<p>Ki·ªÉm tra l·∫°i danh s√°ch:</p>
<ul>
<li>
<p>D√≤ng Priority 1: Auth Rule (Forward to <code>auth-tg</code>).</p>
</li>
<li>
<p>D√≤ng Last (default): Default (Forward to <code>api-gateway-tg</code>).</p>
</li>
</ul>
</li>
<li>
<p>Nh·∫•n n√∫t <strong>Add rule</strong>.</p>
</li>
</ol>
<p><strong>L√†m t∆∞∆°ng t·ª± cho 3 rules c√≤n l·∫°i:</strong></p>
<ol>
<li>
<p><strong>User Rule:</strong></p>
<ul>
<li>
<p>Step 1: Path <code>/api/user/*</code> -&gt; Forward to <code>user-tg</code>.</p>
</li>
<li>
<p>Step 2: Priority nh·∫≠p <strong><code>2</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Task Rule:</strong></p>
<ul>
<li>
<p>Step 1: Path <code>/api/taskflow/*</code> -&gt; Forward to <code>task-tg</code>.</p>
</li>
<li>
<p>Step 2: Priority nh·∫≠p <strong><code>3</code></strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Notification Rule:</strong></p>
<ul>
<li>
<p>Step 1: Path <code>/api/notification/*</code> -&gt; Forward to <code>noti-tg</code>.</p>
</li>
<li>
<p>Step 2: Priority nh·∫≠p <strong><code>4</code></strong>.</p>
</li>
</ul>
</li>
</ol>
<hr>
<p>(ƒê√£ ƒë·∫øn kh√∫c n√†y l√∫c 22:26 ng√†y 05/12/2025)</p>
<h1 id="giai-ƒëo·∫°n-6-t·∫°o-task-definitions-final-version">
  GIAI ƒêO·∫†N 6: T·∫†O TASK DEFINITIONS (FINAL VERSION)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h1><p>M·ª•c ti√™u: T·∫°o 6 &ldquo;b·∫£n thi·∫øt k·∫ø&rdquo; cho 6 Services ƒë·ªÉ ECS bi·∫øt c√°ch ch·∫°y ch√∫ng.</p>
<h3 id="1-chu·∫©n-b·ªã">
  1. Chu·∫©n b·ªã







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Copy s·∫µn c√°c th√¥ng s·ªë sau ra Notepad ƒë·ªÉ d√πng chung cho t·∫•t c·∫£ c√°c b∆∞·ªõc:</p>
<ol>
<li>
<p><strong>RDS Endpoint:</strong> <code>sgu-todolist-db.xxxx.ap-southeast-1.rds.amazonaws.com</code> (L·∫•y t·ª´ RDS).</p>
</li>
<li>
<p><strong>Redis Endpoint:</strong> <code>sgu-redis.xxxx.cache.amazonaws.com</code> (L·∫•y t·ª´ ElastiCache, <strong>b·ªè :6379</strong>).</p>
</li>
<li>
<p><strong>Kafka Bootstrap:</strong> <code>kafka.sgu.local:9092</code> (M·∫∑c ƒë·ªãnh do c·∫•u h√¨nh Service Discovery).</p>
</li>
<li>
<p><strong>Google OAuth:</strong> Client ID &amp; Secret (L·∫•y t·ª´ Google Console).</p>
</li>
<li>
<p><strong>ECR Image URIs:</strong> Link Image c·ªßa 6 services (L·∫•y t·ª´ ECR).</p>
</li>
</ol>
<h3 id="2-t·∫°o-task">
  2. T·∫°o Task







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>V·ªõi <strong>m·ªói Service</strong> trong danh s√°ch b√™n d∆∞·ªõi, ta th·ª±c hi·ªán ƒë√∫ng c√°c b∆∞·ªõc sau:</p>
<ol>
<li>
<p>V√†o <strong>Amazon ECS</strong> &gt; <strong>Task definitions</strong> &gt; <strong>Create new task definition</strong>.</p>
</li>
<li>
<p><strong>Task definition family:</strong> Nh·∫≠p t√™n (v√≠ d·ª•: <code>auth-service-td</code>).</p>
</li>
<li>
<p><strong>Infrastructure requirements:</strong></p>
<ul>
<li>
<p>Launch type: <strong>AWS Fargate</strong>.</p>
</li>
<li>
<p>OS Architecture: <strong>Linux/X86_64</strong>.</p>
</li>
<li>
<p>Task size:</p>
<ul>
<li>
<p>CPU: <strong><code>.5 vCPU</code></strong>.</p>
</li>
<li>
<p>Memory: <strong><code>1 GB</code></strong>.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Task execution role:</strong> Ch·ªçn <strong>Create new role</strong> (ho·∫∑c <code>ecsTaskExecutionRole</code>).</p>
<ul>
<li><em>L∆∞u √Ω: Role n√†y b·∫Øt bu·ªôc ƒë·ªÉ ECS c√≥ quy·ªÅn k√©o Image t·ª´ ECR.</em></li>
</ul>
</li>
<li>
<p><strong>Container - 1:</strong></p>
<ul>
<li>
<p><strong>Name:</strong> Nh·∫≠p t√™n (v√≠ d·ª•: <code>auth-service</code>).</p>
</li>
<li>
<p><strong>Image URI:</strong> Paste link ECR c·ªßa service ƒë√≥.</p>
</li>
<li>
<p><strong>Container port:</strong> Nh·∫≠p Port c·ªßa service ƒë√≥ (v√≠ d·ª•: <code>9999</code>).</p>
</li>
<li>
<p><strong>Protocol:</strong> <code>TCP</code>.</p>
</li>
<li>
<p><strong>App protocol:</strong> <code>HTTP</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Environment variables:</strong> Nh·∫•n <strong>Add environment variable</strong> ƒë·ªÉ th√™m t·ª´ng d√≤ng theo b·∫£ng b√™n d∆∞·ªõi.</p>
</li>
<li>
<p><strong>Logging:</strong> ƒê·∫£m b·∫£o ƒë√£ t√≠ch ch·ªçn <strong>Use log collection</strong> (ƒë·ªÉ xem log l·ªói trong CloudWatch).</p>
</li>
<li>
<p>Nh·∫•n <strong>Create</strong>.</p>
</li>
</ol>
<h3 id="3-chchi-ti·∫øt-c·∫•u-h√¨nh-t·ª´ng-service">
  3. ChChi ti·∫øt c·∫•u h√¨nh t·ª´ng Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p><strong>1. Auth Service</strong></p>
<ul>
<li>
<p><strong>Family Name:</strong> <code>auth-service-td</code></p>
</li>
<li>
<p><strong>Name:</strong> auth-service</p>
</li>
<li>
<p><strong>Container Port:</strong> <code>9999</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value (Thay th·∫ø b·∫±ng th√¥ng tin th·∫≠t c·ªßa b·∫°n)</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATASOURCE_URL</code></td>
          <td><code>jdbc:mysql://&lt;RDS_ENDPOINT&gt;:3306/aws_todolist_database?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_USERNAME</code></td>
          <td><code>root</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_PASSWORD</code></td>
          <td><code>12345678</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><code>&lt;REDIS_ENDPOINT&gt;</code> (Kh√¥ng c√≥ :6379)</td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
      </tr>
      <tr>
          <td><code>SPRING_KAFKA_BOOTSTRAP_SERVERS</code></td>
          <td><code>kafka.sgu.local:9092</code></td>
      </tr>
      <tr>
          <td><code>SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GOOGLE_CLIENT_ID</code></td>
          <td><code>&lt;GOOGLE_CLIENT_ID&gt;</code></td>
      </tr>
      <tr>
          <td><code>SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GOOGLE_CLIENT_SECRET</code></td>
          <td><code>&lt;GOOGLE_CLIENT_SECRET&gt;</code></td>
      </tr>
      <tr>
          <td><code>SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_GOOGLE_REDIRECT_URI</code></td>
          <td><code>https://api.sgutodolist.com/api/auth/login/oauth2/code/google</code></td>
      </tr>
      <tr>
          <td><code>APP_OAUTH2_REDIRECT_URI</code></td>
          <td><code>https://sgutodolist.com/oauth2/redirect</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="2-user-service">
  2. User Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Family Name:</strong> <code>user-service-td</code></p>
</li>
<li>
<p><strong>Container Port:</strong> <code>8081</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATASOURCE_URL</code></td>
          <td><em>(Gi·ªëng Auth Service)</em></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_USERNAME</code></td>
          <td><code>root</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_PASSWORD</code></td>
          <td><code>12345678</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><em>(Gi·ªëng Auth Service)</em></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
      </tr>
      <tr>
          <td><code>SPRING_KAFKA_BOOTSTRAP_SERVERS</code></td>
          <td><code>kafka.sgu.local:9092</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="3-taskflow-service">
  3. Taskflow Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Family Name:</strong> <code>taskflow-service-td</code></p>
</li>
<li>
<p><strong>Container Port:</strong> <code>8082</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATASOURCE_URL</code></td>
          <td><em>(Gi·ªëng Auth Service)</em></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_USERNAME</code></td>
          <td><code>root</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_PASSWORD</code></td>
          <td><code>12345678</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><em>(Gi·ªëng Auth Service)</em></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
      </tr>
      <tr>
          <td><code>SPRING_KAFKA_BOOTSTRAP_SERVERS</code></td>
          <td><code>kafka.sgu.local:9092</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="4-notification-service">
  4. Notification Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Family Name:</strong> <code>notification-service-td</code></p>
</li>
<li>
<p><strong>Container Port:</strong> <code>9998</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATASOURCE_URL</code></td>
          <td><em>(Gi·ªëng Auth Service)</em></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_USERNAME</code></td>
          <td><code>root</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATASOURCE_PASSWORD</code></td>
          <td><code>12345678</code></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><em>(Gi·ªëng Auth Service)</em></td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
      </tr>
      <tr>
          <td><code>SPRING_KAFKA_BOOTSTRAP_SERVERS</code></td>
          <td><code>kafka.sgu.local:9092</code></td>
      </tr>
      <tr>
          <td><code>CLIENT_URL</code></td>
          <td><code>https://sgutodolist.com</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h4 id="5-ai-model-service">
  5. AI Model Service







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><ul>
<li>
<p><strong>Family Name:</strong> <code>ai-model-service-td</code></p>
</li>
<li>
<p><strong>Container Port:</strong> <code>9997</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
<ul>
<li>
<p><em>N·∫øu code Python Flask c·ªßa b·∫°n kh√¥ng d√πng bi·∫øn m√¥i tr∆∞·ªùng n√†o ƒë·∫∑c bi·ªát th√¨ ƒë·ªÉ tr·ªëng ph·∫ßn n√†y.</em></p>
</li>
<li>
<p><em>N·∫øu c√≥ k·∫øt n·ªëi DB, th√™m c√°c bi·∫øn t∆∞∆°ng t·ª± User Service.</em></p>
</li>
</ul>
</li>
</ul>
<hr>
<h4 id="6-api-gateway-quan-tr·ªçng">
  6. API Gateway (QUAN TR·ªåNG)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h4><p>Service n√†y ƒë√≥ng vai tr√≤ &ldquo;ƒêi·ªÅu ph·ªëi vi√™n&rdquo;. N√≥ c·∫ßn bi·∫øt ƒë·ªãa ch·ªâ c·ªßa 5 th·∫±ng c√≤n l·∫°i.</p>
<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng t√™n mi·ªÅn n·ªôi b·ªô sgu.local (s·∫Ω ƒë∆∞·ª£c k√≠ch ho·∫°t ·ªü Giai ƒëo·∫°n 7).1</p>
<ul>
<li>
<p><strong>Family Name:</strong>  <code>api-gateway-td</code></p>
</li>
<li>
<p><strong>Container Port:</strong>  <code>8080</code></p>
</li>
<li>
<p><strong>Environment Variables:</strong></p>
</li>
</ul>
<table>
  <thead>
      <tr>
          <th><strong>Key</strong></th>
          <th><strong>Value</strong></th>
          <th><strong>Gi·∫£i th√≠ch</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>SPRING_DATA_REDIS_HOST</code></td>
          <td><code>&lt;REDIS_ENDPOINT&gt;</code></td>
          <td>Rate Limiting</td>
      </tr>
      <tr>
          <td><code>SPRING_DATA_REDIS_PORT</code></td>
          <td><code>6379</code></td>
          <td></td>
      </tr>
      <tr>
          <td><code>AUTH_SERVICE_URL</code></td>
          <td><code>http://auth.sgu.local:9999</code></td>
          <td>G·ªçi n·ªôi b·ªô</td>
      </tr>
      <tr>
          <td><code>USER_SERVICE_URL</code></td>
          <td><code>http://user.sgu.local:8081</code></td>
          <td>G·ªçi n·ªôi b·ªô</td>
      </tr>
      <tr>
          <td><code>TASKFLOW_SERVICE_URL</code></td>
          <td><code>http://taskflow.sgu.local:8082</code></td>
          <td>G·ªçi n·ªôi b·ªô</td>
      </tr>
      <tr>
          <td><code>NOTIFICATION_SERVICE_URL</code></td>
          <td><code>http://notification.sgu.local:9998</code></td>
          <td>G·ªçi n·ªôi b·ªô</td>
      </tr>
      <tr>
          <td><code>AI_MODEL_SERVICE</code></td>
          <td><code>http://ai-model.sgu.local:9997</code></td>
          <td>G·ªçi n·ªôi b·ªô</td>
      </tr>
      <tr>
          <td><code>CORS_ALLOWED_ORIGINS</code></td>
          <td><code>https://sgutodolist.com</code></td>
          <td>Cho ph√©p Frontend</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="giai-ƒëo·∫°n-7-deploy-services">
  GIAI ƒêO·∫†N 7: DEPLOY SERVICES







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><p>Trong m·ªçi b∆∞·ªõc t·∫°o Service b√™n d∆∞·ªõi, ta <strong>B·∫ÆT BU·ªòC</strong> ph·∫£i ch·ªçn ƒë√∫ng 3 th√¥ng s·ªë n√†y (ƒë·ªÉ Task t·∫£i ƒë∆∞·ª£c Image t·ª´ Internet v√† k·∫øt n·ªëi ƒë∆∞·ª£c Database):</p>
<ol>
<li>
<p><strong>VPC:</strong> Ch·ªçn <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p><strong>Subnets:</strong> Ph·∫£i ch·ªçn <strong>2 PUBLIC SUBNETS</strong> (V√≠ d·ª•: <code>...public1...</code> v√† <code>...public2...</code>).</p>
</li>
<li>
<p><strong>Security Group:</strong> Ch·ªçn <code>ecs-app-sg</code> (B·ªè ch·ªçn default).</p>
</li>
<li>
<p><strong>Public IP:</strong> <strong>TURNED ON</strong> (Quan tr·ªçng nh·∫•t).</p>
</li>
</ol>
<hr>
<h3 id="nh√≥m-1-c√°c-service-nghi·ªáp-v·ª•-auth-user-taskflow-notification">
  NH√ìM 1: C√ÅC SERVICE NGHI·ªÜP V·ª§ (Auth, User, Taskflow, Notification)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>ƒê√¢y l√† 4 service v·ª´a c·∫ßn nh·∫≠n request t·ª´ <strong>Load Balancer</strong> (khi user g·ªçi API), v·ª´a c·∫ßn <strong>Service Discovery</strong> (ƒë·ªÉ Gateway g·ªçi n·ªôi b·ªô).</p>
<p>Th·ª±c hi·ªán quy tr√¨nh d∆∞·ªõi ƒë√¢y <strong>L·∫∂P L·∫†I 4 L·∫¶N</strong> cho 4 service n√†y.</p>
<p><strong>B·∫£ng tham s·ªë (D√πng ƒë·ªÉ tra c·ª©u khi l√†m):</strong></p>
<table>
  <thead>
      <tr>
          <th><strong>Service C·∫ßn T·∫°o</strong></th>
          <th><strong>Ch·ªçn Family (Task Def)</strong></th>
          <th><strong>T√™n Service (ECS)</strong></th>
          <th><strong>Ch·ªçn Target Group (Load Balancer)</strong></th>
          <th><strong>T√™n Service Discovery (R·∫•t quan tr·ªçng)</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Auth Service</strong></td>
          <td><code>auth-service-td</code></td>
          <td><code>auth-service</code></td>
          <td><code>auth-tg</code></td>
          <td><code>auth</code></td>
      </tr>
      <tr>
          <td><strong>User Service</strong></td>
          <td><code>user-service-td</code></td>
          <td><code>user-service</code></td>
          <td><code>user-tg</code></td>
          <td><code>user</code></td>
      </tr>
      <tr>
          <td><strong>Task Service</strong></td>
          <td><code>taskflow-service-td</code></td>
          <td><code>taskflow-service</code></td>
          <td><code>task-tg</code></td>
          <td><code>taskflow</code></td>
      </tr>
      <tr>
          <td><strong>Noti Service</strong></td>
          <td><code>notification-service-td</code></td>
          <td><code>notification-service</code></td>
          <td><code>noti-tg</code></td>
          <td><code>notification</code></td>
      </tr>
  </tbody>
</table>
<p><strong>QUY TR√åNH TH·ª∞C HI·ªÜN:</strong></p>
<ol>
<li>
<p>V√†o <strong>Clusters</strong> &gt; Ch·ªçn Cluster &gt; Tab <strong>Services</strong> &gt; <strong>Create</strong>.</p>
</li>
<li>
<p>Service details (Th√¥ng tin Service)</p>
</li>
</ol>
<ul>
<li>
<p><strong>Task definition family:</strong> Ch·ªçn <code>auth-service-td</code>.</p>
</li>
<li>
<p><strong>Task definition revision:</strong> Ch·ªçn <code>Latest</code>.</p>
</li>
<li>
<p><strong>Service name:</strong> Nh·∫≠p <code>auth-service</code>.</p>
</li>
</ul>
<ol start="3">
<li>Compute configuration (C·∫•u h√¨nh m√°y ch·ªß)</li>
</ol>
<ul>
<li>
<p><strong>Compute options:</strong> Ch·ªçn <strong>Capacity provider strategy</strong>.</p>
</li>
<li>
<p><strong>Capacity provider strategy:</strong> Ch·ªçn <strong>Use custom (Advanced)</strong>.</p>
<ul>
<li>
<p><strong>Capacity provider:</strong> <code>FARGATE</code>.</p>
</li>
<li>
<p><strong>Base:</strong> <code>0</code>.</p>
</li>
<li>
<p><strong>Weight:</strong> <code>1</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Platform version:</strong> <code>LATEST</code>.</p>
</li>
</ul>
<ol start="4">
<li>Deployment configuration (C·∫•u h√¨nh tri·ªÉn khai)</li>
</ol>
<ul>
<li>
<p><strong>Application type:</strong> Service.</p>
</li>
<li>
<p><strong>Scheduling strategy:</strong> <code>Replica</code>.</p>
</li>
<li>
<p><strong>Desired tasks:</strong> Nh·∫≠p <code>1</code>.</p>
</li>
<li>
<p><em>(C√°c ph·∫ßn Min/Max running tasks, Deployment circuit breaker&hellip;: ƒê·ªÉ m·∫∑c ƒë·ªãnh).</em></p>
</li>
</ul>
<ol start="5">
<li>Networking (QUAN TR·ªåNG)</li>
</ol>
<p>ƒê√¢y l√† ph·∫ßn d·ªÖ sai nh·∫•t, h√£y nh√¨n k·ªπ danh s√°ch Subnet b·∫°n g·ª≠i:</p>
<ul>
<li>
<p><strong>VPC:</strong> Ch·ªçn <code>SGU-Microservices-vpc</code>.</p>
</li>
<li>
<p><strong>Subnets:</strong> Trong danh s√°ch 4 c√°i hi·ªán ra, b·∫°n <strong>CH·ªà CH·ªåN 2 C√ÅI C√ì CH·ªÆ &ldquo;PUBLIC&rdquo;</strong>:</p>
<ol>
<li>
<p>‚úÖ <code>SGU-Microservices-subnet-public1-ap-southeast-1a</code></p>
</li>
<li>
<p>‚úÖ <code>SGU-Microservices-subnet-public2-ap-southeast-1b</code></p>
</li>
</ol>
<ul>
<li><em>(Tuy·ªát ƒë·ªëi KH√îNG ch·ªçn private subnets v√¨ b·∫°n kh√¥ng d√πng NAT Gateway).</em></li>
</ul>
</li>
<li>
<p><strong>Security group:</strong></p>
<ul>
<li>
<p>B·∫•m d·∫•u <code>X</code> ƒë·ªÉ x√≥a c√°i <code>default</code> ƒëang c√≥ s·∫µn.</p>
</li>
<li>
<p>Ch·ªçn l·∫°i group: <code>ecs-app-sg</code> (ƒê√£ t·∫°o ·ªü Giai ƒëo·∫°n 1).</p>
</li>
</ul>
</li>
<li>
<p><strong>Public IP:</strong> Ph·∫£i ch·ªçn <strong>Turned on</strong>.</p>
</li>
</ul>
<ol start="6">
<li>Service Connect</li>
</ol>
<ul>
<li><strong>Use Service Connect:</strong> <strong>B·ªé TR·ªêNG (Uncheck)</strong>. <em>(Ch√∫ng ta d√πng Service Discovery ki·ªÉu DNS truy·ªÅn th·ªëng ·ªü b∆∞·ªõc d∆∞·ªõi cho ƒë∆°n gi·∫£n).</em></li>
</ul>
<ol start="7">
<li>Service discovery (C·∫•u h√¨nh t√™n mi·ªÅn n·ªôi b·ªô)</li>
</ol>
<ul>
<li>
<p>T√≠ch ch·ªçn ‚úÖ <strong>Use service discovery</strong>.</p>
</li>
<li>
<p><strong>Config Service Discovery:</strong></p>
<ul>
<li>
<p><strong>Select existing namespace:</strong> Ch·ªçn <code>sgu.local</code>.</p>
</li>
<li>
<p><strong>Service discovery name:</strong> Nh·∫≠p <code>auth</code>.</p>
</li>
<li>
<p><em>(K·∫øt qu·∫£ DNS s·∫Ω l√†: <code>auth.sgu.local</code> - Gateway s·∫Ω d√πng t√™n n√†y ƒë·ªÉ g·ªçi).</em></p>
</li>
</ul>
</li>
</ul>
<ol start="8">
<li>Load balancing (K·∫øt n·ªëi ALB)</li>
</ol>
<ul>
<li>
<p>T√≠ch ch·ªçn ‚úÖ <strong>Use load balancing</strong>.</p>
</li>
<li>
<p><strong>Load balancer type:</strong> Ch·ªçn <strong>Application Load Balancer</strong>.</p>
</li>
<li>
<p><strong>Load balancer:</strong> Ch·ªçn <code>sgu-alb</code>.</p>
</li>
<li>
<p><strong>Container to load balance:</strong> Ch·ªçn d√≤ng <code>auth-service 9999:9999</code> t·ª´ menu th·∫£ xu·ªëng.</p>
</li>
<li>
<p><strong>Listener:</strong> Ch·ªçn d√≤ng <code>Use an existing listener</code> &gt; HTTPS:443.</p>
</li>
<li>
<p><strong>Target group:</strong></p>
<ul>
<li>
<p>Ch·ªçn <strong>Use an existing target group</strong>.</p>
</li>
<li>
<p><strong>Target group name:</strong> Ch·ªçn <code>auth-tg</code> (ƒê√£ t·∫°o ·ªü Giai ƒëo·∫°n 5).</p>
</li>
<li>
<p><em>(C√°c ph·∫ßn Health check grace period&hellip; ƒë·ªÉ m·∫∑c ƒë·ªãnh).</em></p>
</li>
</ul>
</li>
</ul>
<ol start="9">
<li>Service auto scaling (T·ª± ƒë·ªông m·ªü r·ªông)</li>
</ol>
<ul>
<li><strong>Use service auto scaling:</strong> <strong>B·ªé TR·ªêNG (Uncheck)</strong> (ƒê·ªÉ ti·∫øt ki·ªám chi ph√≠ l√∫c n√†y).</li>
</ul>
<hr>
<h3 id="nh√≥m-2-ai-model-service-n·ªôi-b·ªô">
  NH√ìM 2: AI MODEL SERVICE (N·ªôi b·ªô)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Service n√†y kh√¥ng c·∫ßn public ra ngo√†i qua Load Balancer, ch·ªâ c·∫ßn Gateway g·ªçi n·ªôi b·ªô.</p>
<ol>
<li>
<p><strong>Family:</strong> <code>ai-model-service-td</code>.</p>
</li>
<li>
<p><strong>Service name:</strong> <code>svc-ai-model</code>.</p>
</li>
<li>
<p><strong>Networking:</strong></p>
<ul>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Subnets: <strong>2 Public Subnets</strong>.</p>
</li>
<li>
<p>Security group: <code>ecs-app-sg</code>.</p>
</li>
<li>
<p><strong>Public IP:</strong> <strong>Turned on</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Load Balancing:</strong> <strong>KH√îNG CH·ªåN G√å C·∫¢</strong> (ƒê·ªÉ tr·ªëng).</p>
</li>
<li>
<p><strong>Service Discovery:</strong></p>
<ul>
<li>
<p>Check v√†o <strong>Use service discovery</strong>.</p>
</li>
<li>
<p>Namespace: <code>sgu.local</code>.</p>
</li>
<li>
<p>Service discovery name: <code>ai-model</code>.</p>
</li>
<li>
<p><em>(K·∫øt qu·∫£ DNS: <code>ai-model.sgu.local</code>)</em>.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
<hr>
<h3 id="nh√≥m-3-api-gateway-c·ªïng-ch√≠nh">
  NH√ìM 3: API GATEWAY (C·ªïng ch√≠nh)







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Service n√†y l√† c·ª≠a ng√µ, n√≥ nh·∫≠n traffic m·∫∑c ƒë·ªãnh t·ª´ Load Balancer.</p>
<ol>
<li>
<p><strong>Family:</strong> <code>api-gateway-td</code>.</p>
</li>
<li>
<p><strong>Service name:</strong> <code>api-gateway</code>.</p>
</li>
<li>
<p><strong>Networking:</strong></p>
<ul>
<li>
<p>VPC: <code>SGU-Microservices-VPC</code>.</p>
</li>
<li>
<p>Subnets: <strong>2 Public Subnets</strong>.</p>
</li>
<li>
<p>Security group: <code>ecs-app-sg</code>.</p>
</li>
<li>
<p><strong>Public IP:</strong> <strong>Turned on</strong>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Load Balancing:</strong></p>
<ul>
<li>
<p>Load balancer type: <strong>Application Load Balancer</strong>.</p>
</li>
<li>
<p>Load balancer: <code>sgu-alb</code>.</p>
</li>
<li>
<p><strong>Container to load balance:</strong> <code>api-gateway:8080</code>.</p>
</li>
<li>
<p>Click <strong>Add to load balancer</strong>.</p>
</li>
<li>
<p><strong>Listener:</strong> <strong>Use an existing listener</strong> -&gt; <strong>80:HTTP</strong>.</p>
</li>
</ul>
</li>
</ol>
<p>Sau ƒë√≥ nh·∫•n <strong>Create</strong> l√† xong nh√©! API Gateway s·∫Ω nh·∫≠n t·∫•t c·∫£ traffic n√†o kh√¥ng th</p>
<pre><code>-   **Target group:** Check v√†o **Use an existing target group**.

-   Target group name: **`api-gateway-tg`**.
</code></pre>
<ol start="5">
<li>
<p><strong>Service Discovery:</strong></p>
<ul>
<li>
<p>Check v√†o <strong>Use service discovery</strong>.</p>
</li>
<li>
<p>Namespace: <code>sgu.local</code>.</p>
</li>
<li>
<p>Service discovery name: <code>api-gateway</code>.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
<hr>
<h3 id="-c√°ch-ki·ªÉm-tra--x·ª≠-l√Ω-s·ª±-c·ªë">
  üîç C√ÅCH KI·ªÇM TRA &amp; X·ª¨ L√ù S·ª∞ C·ªê







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h3><p>Sau khi t·∫°o xong c·∫£ 6 services, b·∫°n v√†o tab <strong>Tasks</strong> c·ªßa Cluster ƒë·ªÉ theo d√µi.</p>
<ol>
<li>
<p><strong>Tr·∫°ng th√°i mong mu·ªën:</strong></p>
<ul>
<li>
<p>C·ªôt <strong>Last status</strong> chuy·ªÉn t·ª´ <code>PROVISIONING</code> -&gt; <code>PENDING</code> -&gt; <code>RUNNING</code> (M√†u xanh l√°).</p>
</li>
<li>
<p>N·∫øu n√≥ ƒë·ª©ng ·ªü <code>PENDING</code> h∆°i l√¢u (1-2 ph√∫t) l√† b√¨nh th∆∞·ªùng (ƒëang t·∫£i image).</p>
</li>
</ul>
</li>
<li>
<p><strong>N·∫øu Task b·ªã chuy·ªÉn sang <code>STOPPED</code> (M√†u ƒë·ªè):</strong></p>
<ul>
<li>
<p>ƒê√¢y l√† chuy·ªán th∆∞·ªùng g·∫∑p l·∫ßn ƒë·∫ßu deploy. ƒê·ª´ng lo l·∫Øng.</p>
</li>
<li>
<p>Click v√†o m√£ Task (v√≠ d·ª•: <code>e4d3...</code>).</p>
</li>
<li>
<p>Nh√¨n m·ª•c <strong>Stopped reason</strong>.</p>
</li>
<li>
<p>N·∫øu l√Ω do chung chung, chuy·ªÉn sang tab <strong>Logs</strong>.</p>
</li>
<li>
<p><strong>C√°c l·ªói th∆∞·ªùng g·∫∑p:</strong></p>
<ul>
<li>
<p><code>Connection refused</code>: Sai th√¥ng tin RDS/Redis trong bi·∫øn m√¥i tr∆∞·ªùng.</p>
</li>
<li>
<p><code>CannotPullContainerError</code>: Qu√™n b·∫≠t <strong>Public IP</strong> ho·∫∑c Subnet kh√¥ng c√≥ Internet.</p>
</li>
<li>
<p><code>Health check failed</code>: Service kh·ªüi ƒë·ªông qu√° l√¢u (tr√™n 30s) n√™n ALB t∆∞·ªüng n√≥ ch·∫øt. (C√°ch s·ª≠a: V√†o Target Group &gt; Health checks &gt; TƒÉng <strong>Interval</strong> l√™n 60s v√† <strong>Timeout</strong> l√™n 30s).</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>
<h2 id="giai-ƒëo·∫°n-8-ho√†n-t·∫•t">
  GIAI ƒêO·∫†N 8: HO√ÄN T·∫§T







<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Sao ch√©p li√™n k·∫øt v√†o b·∫£ng t·∫°m"><i class="fa-fw fas fa-link fa-lg"></i></button></span>
</h2><ol>
<li>
<p><strong>Route 53:</strong> T·∫°o A Record <code>api.sgutodolist.com</code> tr·ªè v·ªÅ ALB.</p>
</li>
<li>
<p><strong>Google Console:</strong> Add Redirect URI <code>https://api.sgutodolist.com/api/auth/login/oauth2/code/google</code>.</p>
</li>
</ol>
<p><strong>CHECKLIST:</strong></p>
<ul>
<li>
<p>V√†o <code>https://api.sgutodolist.com/actuator/health</code> -&gt; OK.</p>
</li>
<li>
<p>V√†o <code>https://sgutodolist.com</code> -&gt; Login -&gt; OK.</p>
</li>
</ul>

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">
        <div id="R-header" class="default-animation">
          <a id="R-logo" class="R-default" href="/AWS-Workshop/vi/index.html">
            <div class="logo-title">B√°o C√°o Th·ª±c T·∫≠p</div>
          </a>
        </div>
        <search><form action="/AWS-Workshop/vi/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="T√¨m ki·∫øm (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">T√¨m ki·∫øm</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="T√¨m ki·∫øm...">
            <button class="search-clear" type="button" data-search-clear="" title="X√≥a t√¨m ki·∫øm"><i class="fas fa-times" title="X√≥a t√¨m ki·∫øm"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/vi/index.html"><a class="padding" href="/AWS-Workshop/vi/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/vi/1-worklog/index.html"><a class="padding" href="/AWS-Workshop/vi/1-worklog/index.html"><b>1. </b>Nh·∫≠t k√Ω c√¥ng vi·ªác</a><ul id="R-subsections-16447363d800ec5deaa3b0a76c63c922" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/2-proposal/index.html"><a class="padding" href="/AWS-Workshop/vi/2-proposal/index.html"><b>2. </b>ƒê·ªÅ xu·∫•t</a></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/3-translated_blogs/index.html"><a class="padding" href="/AWS-Workshop/vi/3-translated_blogs/index.html"><b>3. </b>Translated Blogs</a><ul id="R-subsections-0acade1cd81cfef73c977718aa56c877" class="collapsible-menu"></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/4-events_participated/index.html"><a class="padding" href="/AWS-Workshop/vi/4-events_participated/index.html"><b>4. </b>Events Participated</a><ul id="R-subsections-2ffb5c6e09dd8464b993d0a4a8003912" class="collapsible-menu"></ul></li>
            <li class="parent " data-nav-url="/AWS-Workshop/vi/5-workshop/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/index.html"><b>5. </b>Workshop</a><ul id="R-subsections-3232083df9b680629be5cc26bdd904c0" class="collapsible-menu">
            <li class="" data-nav-url="/AWS-Workshop/vi/5-workshop/5.1-workshop_overview/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.1-workshop_overview/index.html"> <b> 5.1.  </b> Workshop Overview</a></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/5-workshop/5.2-prerequisite/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.2-prerequisite/index.html"> <b> 5.2.  </b> Prerequisite</a></li>
            <li class="parent alwaysopen " data-nav-url="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/index.html"> <b> 5.3.  </b> Deploy Flow</a><ul id="R-subsections-bb7fe7553348ca03cc6bc8ebf581479a" class="collapsible-menu">
            <li class="alwaysopen " data-nav-url="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.1-frontend-deploy/index.html"> <b> 5.3.1. </b> Frontend Deploy</a><ul id="R-subsections-d09eca34c02fd87267f3fac7e509af1c" class="collapsible-menu"></ul></li>
            <li class="active hidden " data-nav-url="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html"></a></li></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/5-workshop/5.4-clean_up/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.4-clean_up/index.html"> <b> 5.4.  </b> Clean Up</a></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/5-workshop/5.5-mystic-skills/index.html"><a class="padding" href="/AWS-Workshop/vi/5-workshop/5.5-mystic-skills/index.html"><b>5.5. </b>Mystic Skills</a></li></ul></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/6-self-assesment/index.html"><a class="padding" href="/AWS-Workshop/vi/6-self-assesment/index.html"><b>6. </b>T·ª± ƒë√°nh gi√°</a></li>
            <li class="" data-nav-url="/AWS-Workshop/vi/7-sharing_and_feedback/index.html"><a class="padding" href="/AWS-Workshop/vi/7-sharing_and_feedback/index.html"><b>7. </b>Chia s·∫ª v√† Ph·∫£n h·ªìi</a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols">
          <ul class="">
			<li class="R-languageswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-language"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-language">Ng√¥n ng·ªØ</label>
                  <select id="R-select-language">
                    <option id="R-select-language-en" value="en" data-url="/AWS-Workshop/en/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html" lang="en">English</option>
                    <option id="R-select-language-vi" value="vi" data-url="/AWS-Workshop/vi/5-workshop/5.3-deploy_flow/5.3.2-backend-deploy/index.html" lang="vi" selected data-selected>Ti·∫øng Vi·ªát</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
            </li>
            <li class="R-variantswitcher">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-paint-brush"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <label class="a11y-only" for="R-select-variant">ƒê·ªÅ t√†i</label>
                  <select id="R-select-variant">
                    <option id="R-select-variant-relearn-light" value="relearn-light" selected>Relearn Light</option>
                    <option id="R-select-variant-relearn-dark" value="relearn-dark">Relearn Dark</option>
                  </select>
                </div>
                <div class="clear"></div>
              </div>
              <script>window.relearn.markVariant();</script>
            </li>
          </ul>
        </div>
<div id="R-footer"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/AWS-Workshop/js/perfect-scrollbar/perfect-scrollbar.min.js?1765170766" defer></script>
    <script src="/AWS-Workshop/js/theme.min.js?1765170766" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
